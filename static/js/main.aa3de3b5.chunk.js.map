{"version":3,"sources":["utils/Utils.ts","model/model.ts","stores/MainStore.ts","stores/CurrentTaskStore.ts","stores/CurrentDoingTaskStore.ts","stores/index.ts","stores/CurrentDayOffsetStore.ts","utils/DateUtils.ts","utils/Format.ts","layouts/TaskListContainer.tsx","layouts/ContentLayout.tsx","layouts/App.tsx","serviceWorker.ts","index.tsx"],"names":["Utils","obj","content","transfer","document","createElement","style","cssText","body","appendChild","value","focus","select","execCommand","blur","removeChild","fileName","console","log","eleLink","download","display","blob","Blob","href","URL","createObjectURL","click","Date","getTime","src","regex","search","RegExp","regExp","Math","random","toString","start1","end1","start2","end2","array","object","length","this","i","shift","pop","splice","Task","Type","Duration","id","title","note","Note","level","createTime","doneTime","deadlines","expectConsumes","getTimestamp","generateId","idCounter","task","undefined","doingDurs","end","start","duration","init","push","delay","map","index","getDur","reduce","a","b","left","getActualExpectConsume","getAllDuration","error","timeStamp","isDoing","StoreModel","dur","tasks","filter","isDone","isIn","containsProject","find","item","sort","storage","isDebug","fetch","_getMockStoreModel","result","storageJson","localStorage","getItem","plainToClass","JSON","parse","save","storeModel","setItem","stringify","newLocal","addTask","model","setModel","currentTaskStore","currentTask","setCurrentTask","currentDoingTaskStore","currentDoingTask","setCurrentDoingTask","storeManager","Store","registerStore","mainmodel","currentDayOffset","setCurrentDayOffset","offset","DateUtils","hour","today","setHours","dayZeroTime","offsetHour","day","dayMills","offsetDay","getCurrentDayStamp","dayOffset","getOffsetedDayDur","getMyCurrentDayStamp","Format","timeMs","date","Y","getFullYear","M","getMonth","D","getDate","h","getHours","m","getMinutes","s","getSeconds","ms","getMilliseconds","time","天","floor","小时","分","秒","Object","entries","val","key","join","Container","styled","div","Container2","ButtonGroup","Input","Group","Button","NoteItem","props","choosed","NoteList","stores","useStore","useEffect","doingTasks","stop","getMenu","onClick","param","Number","orderTasks","domEvent","preventDefault","onClickMenu","Item","_realDone","done","message","success","getShowTips","getDoingStatusTips","formatDuration","isStringEmpty","getConsumed","deadline","getActualDeadline","leftTime","getDeadline","getLeftExpectConsumeTime","getConsumeExpected","getDeadlineTime","moment","size","backgroundColor","margin","bordered","dataSource","getTasks","getMyCurrentDayDur","renderItem","isSameTask","e","type","event","Modal","confirm","onOk","removeTask","deleteTask","formatTimeInMs","lastStartTime","startTask","doneTask","overlay","paddingLeft","className","DownOutlined","showTime","defaultValue","valueOf","onChooseDeadline","NoteItemInput","useState","setContent","onChange","target","onBlur","TaskListContainer","setTitle","expectTime","setExpectTime","onAddNote","newTask","changeOffsetDay","isAdd","downloadFile","formatTimeInMsToFileName","padding","formatTimeInDay","base","getOffsetString","multiple","file","files","reader","FileReader","onload","uploadContent","onCancel","readAsText","upload","compact","width","placeholder","onPressEnter","prefix","suffix","notDoneTasks","consumeFormat","consumes","getAllTaskStatus","Editor","TextArea","ContentLayout","lastTask","setLastTask","saveToLocal","isManual","info","AppContainer","App","Boolean","window","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.aa3de3b5.chunk.js","sourcesContent":["\nclass Utils {\n    public static isStringEmpty(obj: any): boolean {\n        if (typeof obj === \"undefined\" || obj === null || obj === \"\") {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    public static exportContentToClipboard(content: string) {\n        let transfer = document.createElement('textarea');\n        // 不这么设置屏幕会跳，具体哪儿有问题还没确定\n        transfer.style.cssText = \"width:30%;padding:2%;min-width: 100px;opacity: 0.5;color: rgb(255, 255, 255);line-height: 18px;text-align: center;border-radius: 5px;position: fixed;top: 50%;left: 30%;z-index: 999999;background: rgb(0, 0, 0);font-size: 15px;\";\n        document.body.appendChild(transfer);\n        transfer.value = content;  // 这里表示想要复制的内容\n        transfer.focus();\n        transfer.select();\n        if (document.execCommand('copy')) {\n            document.execCommand('copy');\n        }\n        transfer.blur();\n        document.body.removeChild(transfer);\n    }\n\n    public static downloadFile(fileName: string, content: string) {\n        console.log(\"download\")\n        // 创建隐藏的可下载链接\n        var eleLink = document.createElement('a');\n        eleLink.download = fileName;\n        eleLink.style.display = 'none';\n        // 字符内容转变成blob地址\n        var blob = new Blob([content]);\n        eleLink.href = URL.createObjectURL(blob);\n        // 触发点击\n        document.body.appendChild(eleLink);\n        eleLink.click();\n        // 然后移除\n        document.body.removeChild(eleLink);\n    }\n\n    public static generateId(): number {\n        return (new Date()).getTime()\n    }\n\n    // rename currentTimpstamp\n    public static getTimestamp(): number {\n        return (new Date()).getTime()\n    }\n\n    public static match(src: string, regex: string): boolean {\n        return src.search(new RegExp(regex, 'i')) > -1\n    }\n\n    // todo 不能重载吗？\n    public static matchs(src: string, regExp: RegExp): boolean {\n        return src.search(regExp) > -1\n    }\n\n    public static getRandomColor(): string {\n        return '#' + (Math.random() * 0xffffff << 0).toString(16);\n    }\n\n    public static hasIntersection(start1: number, end1: number, start2: number, end2: number): boolean {\n\n        if (end2 < start1 || end1 < start2) {\n            return false\n        } else {\n            return true\n        }\n    }\n\n    public static removeObject(array: any[], object: any): boolean {\n        let length = this.length;\n        for (let i = 0; i < length; i++) {\n            if (array[i] === object) {\n                if (i === 0) {\n                    array.shift(); //删除并返回数组的第一个元素\n                } else if (i === length - 1) {\n                    array.pop();  //删除并返回数组的最后一个元素\n                } else {\n                    array.splice(i, 1); //删除下标为i的元素\n                }\n                return true\n            }\n        }\n\n        return false\n    }\n}\n\nexport default Utils","import Utils from '../utils/Utils'\nimport {Type} from \"class-transformer\";\n\nclass Task {\n    // todo delete 内存id增加器（因为mock初始化太快了，都在一个毫秒内）\n    private static idCounter = 0\n\n    public id: number = -1\n\n    public title: string = \"undefine\"\n    public note: Note = new Note()\n\n    public level: number = 3\n\n    public createTime: number = -1\n    public doneTime: number = -1\n\n    // 可修改，最后一个有效\n    public deadlines: number[] = []\n    // 预计花费时间，单位毫秒，可修改，最后一个有效\n    public expectConsumes: number[] = []\n\n    @Type(() => Duration)\n    public doingDurs: Duration[] = []\n\n    // 反序列化不能有带参数的构造器\n    // public constructor(title: string) {\n    //     this.title = title\n    //     this.createTime = Utils.getTimestamp()\n\n    //     this.id = Utils.generateId() + Task.idCounter\n    //     Task.idCounter = Task.idCounter + 1000\n    // }\n\n    public init(title: string) {\n        this.title = title\n        this.createTime = Utils.getTimestamp()\n\n        this.id = Utils.generateId() + Task.idCounter\n        Task.idCounter = Task.idCounter + 1000\n    }\n\n    public isSameTask(task: Task | undefined): boolean {\n        if (task === undefined) {\n            return false\n        } else {\n            return this.id === task.id\n        }\n    }\n\n    public isDoing(): boolean {\n        if (this.doingDurs.length === 0) {\n            return false\n        } else {\n            let lastTask = this.doingDurs[this.doingDurs.length - 1]\n            return lastTask.end === -1\n        }\n    }\n\n    public lastStartTime(): number {\n        if (this.doingDurs.length === 0) {\n            return -1\n        } else {\n            let lastTask = this.doingDurs[this.doingDurs.length - 1]\n            return lastTask.start\n        }\n    }\n\n    public start() {\n        let duration = new Duration()\n        duration.init(Utils.getTimestamp())\n        this.doingDurs.push(duration)\n    }\n\n    public stop() {\n        this.doingDurs[this.doingDurs.length - 1].end = Utils.getTimestamp()\n    }\n\n    public stopDelay(delay:number) {\n        this.doingDurs[this.doingDurs.length - 1].end = Utils.getTimestamp()+ delay\n    }\n\n    public isDone(): boolean {\n        return this.doneTime !== -1\n    }\n\n    public done() {\n        this.doneTime = Utils.getTimestamp()\n    }\n\n    // 返回毫秒数\n    // todo rename getAllDoingDuration\n    public getAllDuration(): number {\n        if (this.doingDurs.length === 0) {\n            return 0\n        }\n\n        return this.doingDurs.map((value, index) => value.getDur(index === this.doingDurs.length - 1)).reduce((a, b) => a + b)\n    }\n\n    public getActualDeadline(): number {\n        if (this.deadlines.length === 0) {\n            return -1\n        }\n\n        return this.deadlines[this.deadlines.length - 1]\n    }\n\n    public getActualExpectConsume(): number {\n        if (this.expectConsumes.length === 0) {\n            return -1\n        }\n\n        return this.expectConsumes[this.expectConsumes.length - 1]\n    }\n\n    // 超出预期时间返回多花的时间，负值\n    public getLeftExpectConsumeTime(): number {\n        let left = this.getActualExpectConsume() - this.getAllDuration()\n        if (left < 0) {\n            console.error(\"超出预期时间\")\n        }\n        return left\n    }\n}\n\nclass Duration {\n    public start: number = -1\n    public end: number = -1\n\n    // todo 没法重载\n    public init(start: number) {\n        this.start = start\n    }\n    public init2(start: number, end?: number) {\n        this.start = start\n        if (end != undefined) {\n            this.end = end\n        }\n    }\n\n    public isIn(timeStamp: number) {\n        return timeStamp >= this.start && timeStamp <= this.end\n    }\n\n    public getDur(isDoing: boolean): number {\n        let end = this.end\n        if (end == -1 && isDoing) {\n            end = Utils.getTimestamp()\n        }\n        if (end == -1) {\n            console.error(\"这段时间未结束\")\n            return 0\n        }\n        return end - this.start\n    }\n\n    public isValid(isDoing: boolean) {\n        if (!isDoing && this.end == -1) return false\n        return true\n    }\n}\n\nclass Note {\n    public content: string = \"\"\n}\n\nclass StoreModel {\n    @Type(() => Task)\n    public tasks: Task[] = []\n\n    /**\n     * 筛选规则：\n     * 1. 所有未完成的任务（之后要排除非当天的计划任务）\n     * 2. 今天完成的任务\n     */\n    public getTasks(dur: Duration): Task[] {\n        return this.tasks.filter((value) => { return !value.isDone() || dur.isIn(value.doneTime) })\n    }\n\n    public addTask(task: Task) {\n        if (this.containsProject(task.id)) return\n\n        this.tasks.push(task)\n    }\n\n    public removeTask(task: Task): boolean {\n        if (!this.containsProject(task.id)) return false\n\n        let length = this.tasks.length;\n        for (let i = 0; i < length; i++) {\n            if (this.tasks[i].id === task.id) {\n                if (i === 0) {\n                    this.tasks.shift(); //删除并返回数组的第一个元素\n                } else if (i === length - 1) {\n                    this.tasks.pop();  //删除并返回数组的最后一个元素\n                } else {\n                    this.tasks.splice(i, 1); //删除下标为i的元素\n                }\n                return true\n            }\n        }\n        return false\n    }\n\n    private containsProject(id: number): boolean {\n        return this.tasks.find(item => item.id === id) !== undefined\n    }\n\n    public orderTasks() {\n        this.tasks.sort((a, b) => {\n            if (a.isDone() && !b.isDone()) {\n                return 1\n            } else if (!a.isDone() && b.isDone()) {\n                return -1\n            } else {\n                if (a.level > b.level) {\n                    return 1\n                } else if (a.level < b.level) {\n                    return -1\n                } else {\n                    if (a.createTime > b.createTime) {\n                        return 1\n                    } else if (a.createTime < b.createTime) {\n                        return -1\n                    } else {\n                        return 0\n                    }\n                }\n            }\n        })\n    }\n}\n\n\nexport { Task, Duration, StoreModel, Note }","import { Task, Duration, StoreModel } from '../model/model'\nimport Utils from '../utils/Utils';\nimport stores from '../stores';\nimport 'reflect-metadata'\nimport '../../node_modules/reflect-metadata/Reflect.js'\nimport { plainToClass } from \"class-transformer\";\n\n\nconst STORAGE_KEY = 'DoingList3'\nconst storage = {\n    isDebug: false,\n    fetch: function (): StoreModel {\n        if (this.isDebug) {\n            return this._getMockStoreModel()\n        }\n\n        let result = new StoreModel()\n\n        let storageJson = localStorage.getItem(STORAGE_KEY)\n        if (storageJson != null) {\n            return plainToClass(StoreModel, JSON.parse(storageJson))\n        }\n\n        return result\n    },\n\n    save: function (storeModel: StoreModel) {\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(storeModel))\n    },\n\n    _getMockStoreModel(): StoreModel {\n        let result = new StoreModel()\n\n        for (let index = 0; index < 12; index++) {\n            const newLocal = new Task();\n        newLocal.init(\"我的第 \" + index + \" 个任务\")\n            result.addTask(newLocal)\n        }\n\n        return result\n    },\n}\n\nconst model = {\n    storeModel: storage.fetch(),\n\n    save() {\n        storage.save(this.storeModel)\n    },\n\n    setModel(model: StoreModel) {\n        this.storeModel = model\n        this.save()\n    },\n};\n\nexport default model","import { Task } from '../model/model'\n\nconst CurrentTaskKey = \"CurrentTaskKey\"\n\nconst currentTaskStore = {\n    currentTask: undefined as Task|undefined,\n\n    setCurrentTask(task: Task) {\n        this.currentTask = task\n    },\n};\n\nexport {CurrentTaskKey, currentTaskStore}","import { Task } from '../model/model'\n\nconst CurrentDoingTaskKey = \"CurrentDoingTaskKey\"\n\nconst currentDoingTaskStore = {\n    currentDoingTask: undefined as Task|undefined,\n\n    setCurrentDoingTask(task: Task| undefined) {\n        this.currentDoingTask = task\n    },\n};\n\nexport {CurrentDoingTaskKey, currentDoingTaskStore}","import mainmodel from './MainStore';\nimport Store from '@ice/store';\n\nimport { CurrentTaskKey, currentTaskStore } from './CurrentTaskStore';\nimport { CurrentDoingTaskKey, currentDoingTaskStore } from './CurrentDoingTaskStore';\nimport { CurrentDayOffsetKey, currentDayOffsetStore } from './CurrentDayOffsetStore';\n\nconst storeManager = new Store();\n//  *（@@@？todo 使用常量 mainmodel？）* \nstoreManager.registerStore('mainmodel', mainmodel);\nstoreManager.registerStore(CurrentTaskKey, currentTaskStore);\nstoreManager.registerStore(CurrentDoingTaskKey, currentDoingTaskStore);\nstoreManager.registerStore(CurrentDayOffsetKey, currentDayOffsetStore);\n\nexport default storeManager;","\nconst CurrentDayOffsetKey = \"CurrentDayOffsetKey\"\n\nconst currentDayOffsetStore = {\n    currentDayOffset: 0,\n\n    setCurrentDayOffset(offset: number) {\n        this.currentDayOffset = offset\n    },\n};\n\nexport {CurrentDayOffsetKey, currentDayOffsetStore}","import { Duration } from \"../model/model\";\n\nclass DateUtils {\n    private static dayMills: number = 24 * 60 * 60 * 1000\n    private static dayOffset: number = 6\n\n    public static getCurrentDayStamp(hour: number): number {\n        let today = new Date();\n        today.setHours(hour, 0, 0, 0);\n        return today.getTime();\n    }\n\n    // 暂时 offsetHour 只支持 0-24 之间的数\n    public static getOffsetedDayDur(dayZeroTime: number, offsetHour: number): Duration {\n        let day = new Date(dayZeroTime)\n        day.setHours(offsetHour, 0, 0, 0)\n\n        let result = new Duration()\n        result.init(day.getTime())\n        result.end = day.getTime() + DateUtils.dayMills\n        return result\n    }\n\n    //-------------------- 以下业务相关 --------------------\n\n    public static getMyCurrentDayStamp(offsetDay: number): number {\n        let now = new Date().getTime()\n        let todayOffset = DateUtils.getCurrentDayStamp(DateUtils.dayOffset)\n        if (now > todayOffset) {\n            return DateUtils.getCurrentDayStamp(0) + DateUtils.dayMills * offsetDay\n        } else {\n            return DateUtils.getCurrentDayStamp(0) - DateUtils.dayMills + DateUtils.dayMills * offsetDay\n        }\n    }\n\n    public static getMyCurrentDayDur(offsetDay: number): Duration {\n        return DateUtils.getOffsetedDayDur(DateUtils.getMyCurrentDayStamp(offsetDay), DateUtils.dayOffset)\n    }\n}\n\nexport default DateUtils","class Format {\n    public static formatTimeInMs(timeMs: number) {\n        let date = new Date(timeMs);//如果date为13位不需要乘1000\n        let Y = date.getFullYear() + '-';\n        let M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';\n        let D = (date.getDate() < 10 ? '0' + (date.getDate()) : date.getDate()) + ' ';\n        let h = (date.getHours() < 10 ? '0' + date.getHours() : date.getHours()) + ':';\n        let m = (date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()) + ':';\n        let s = (date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds()) + ':';\n\n        let msString = \"\"\n        let ms = date.getMilliseconds()\n        if (ms < 10) {\n            msString = '00' + ms\n        } else if (ms < 100) {\n            msString = '0' + ms\n        } else {\n            msString = '' + ms\n        }\n\n        return \"[\" + Y + M + D + h + m + s + msString + \"]\";\n    }\n\n    public static formatTimeInMsToFileName(timeMs: number) {\n        let date = new Date(timeMs);//如果date为13位不需要乘1000\n        let Y = date.getFullYear() + '_';\n        let M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '_';\n        let D = (date.getDate() < 10 ? '0' + (date.getDate()) : date.getDate()) + ' ';\n        let h = (date.getHours() < 10 ? '0' + date.getHours() : date.getHours()) + '_';\n        let m = (date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()) + '_';\n        let s = (date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds()) + '_';\n\n        let msString = \"\"\n        let ms = date.getMilliseconds()\n        if (ms < 10) {\n            msString = '00' + ms\n        } else if (ms < 100) {\n            msString = '0' + ms\n        } else {\n            msString = '' + ms\n        }\n\n        return Y + M + D + h + m + s + msString;\n    }\n\n    public static formatTimeInMinute(timeMs: number) {\n        let date = new Date(timeMs);//如果date为13位不需要乘1000\n        let Y = date.getFullYear() + '-';\n        let M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';\n        let D = (date.getDate() < 10 ? '0' + (date.getDate()) : date.getDate()) + ' ';\n        let h = (date.getHours() < 10 ? '0' + date.getHours() : date.getHours()) + ':';\n        let m = (date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes());\n\n        return Y + M + D + h + m;\n    }\n\n    public static formatTimeInDay(timeMs: number) {\n        let date = new Date(timeMs);//如果date为13位不需要乘1000\n        let Y = date.getFullYear() + '-';\n        let M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';\n        let D = (date.getDate() < 10 ? '0' + (date.getDate()) : date.getDate());\n        return Y + M + D;\n    }\n\n    public static formatDuration(timeMs: number): string {\n        if (timeMs < 0) timeMs = -timeMs;\n\n        const time = {\n          天: Math.floor(timeMs / 86400000),\n          小时: Math.floor(timeMs / 3600000) % 24,\n          分: Math.floor(timeMs / 60000) % 60,\n          秒: Math.floor(timeMs / 1000) % 60,\n        //   毫秒: Math.floor(timeMs) % 1000\n        };\n\n        return Object.entries(time)\n          .filter(val => val[1] !== 0)\n          .map(([key, val]) => `${val}${key}`)\n          .join('');\n      };\n}\n\nexport default Format\n\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Input, message, Button, List, Dropdown, Menu, Modal, DatePicker } from 'antd';\n// 这样居然真的行\nimport { ClickParam } from 'antd/lib/menu';\n// import { DateType } from 'antd/lib/date-picker';\nimport { DownOutlined } from '@ant-design/icons';\nimport stores from '../stores';\nimport { StoreModel, Duration } from '../model/model'\nimport Utils from '../utils/Utils'\nimport DateUtils from '../utils/DateUtils'\nimport Format from '../utils/Format'\nimport { Task, Note } from '../model/model'\nimport { CurrentTaskKey } from '../stores/CurrentTaskStore';\nimport { CurrentDoingTaskKey } from '../stores/CurrentDoingTaskStore';\nimport { CurrentDayOffsetKey } from '../stores/CurrentDayOffsetStore';\nimport 'antd/dist/antd.css';\nimport moment from 'moment'\nimport { plainToClass } from \"class-transformer\";\n\nconst Container = styled.div`\n  /* background: #d1d3a2; */\n  /* background: #d1dfff; */\n  background: #282c34;\n`\n\nconst Container2 = styled.div`\n  /* background: #d1d3a2; */\n  /* background: #d1dfff; */\n  background: #282c34;\n  overflow:auto;\n  /* height: 800px; */\n  height: 85vh;\n  margin-top:10px;\n`\n\nconst InputGroup = styled(Input.Group)`\nmargin: 1%;\n`\nconst ButtonGroup = styled(Button.Group)`\nmargin: 1%;\n`\n\nconst TaskListContainer: React.FC = () => {\n  const { storeModel, save, setModel } = stores.useStore('mainmodel') as { storeModel: StoreModel, save: () => void, setModel: (storeModel: StoreModel) => void };\n  const { currentDayOffset, setCurrentDayOffset } = stores.useStore(CurrentDayOffsetKey) as { currentDayOffset: number, setCurrentDayOffset: (offset: number) => void }\n  const [title, setTitle] = useState(\"\");\n  const [expectTime, setExpectTime] = useState(2);\n\n  // React.useEffect(() => {\n  //   console.log(\"TaskListContainer useEffect\")\n  // },[])\n\n  function onAddNote(event: any) {\n    event.preventDefault();\n\n    if (Utils.isStringEmpty(title)) {\n      message.error(\"请输入内容\")\n      return\n    }\n\n    const newTask = new Task()\n    newTask.init(title)\n    newTask.expectConsumes.push(expectTime * 3600 * 1000) // 单位小时，转换\n    storeModel.addTask(newTask)\n    save()\n\n    setTitle(\"\")\n  }\n\n  function changeOffsetDay(isAdd: boolean) {\n    if (isAdd) {\n      setCurrentDayOffset(currentDayOffset + 1)\n    } else {\n      setCurrentDayOffset(currentDayOffset - 1)\n    }\n  }\n\n  function download() {\n    Utils.downloadFile(`DoingList_${Format.formatTimeInMsToFileName(Utils.getTimestamp())}.dl`, JSON.stringify(storeModel))\n  }\n\n  function upload(e: any) {\n    let file = e.target.files[0];\n    console.log(file)\n\n    let reader = new FileReader();\n    reader.onload = function (this) {\n      let uploadContent = this.result\n      if (typeof uploadContent === 'string') {\n        Modal.confirm({\n          title: '确定要导入嘛？',\n          content: `导入会覆盖当前所有任务`,\n          onOk() {\n            Modal.confirm({\n              title: '是否需要先下载当前任务？',\n              content: ``,\n              onOk() {\n                download()\n                setModel(plainToClass(StoreModel, JSON.parse(uploadContent as string)))\n              },\n              onCancel() {\n                setModel(plainToClass(StoreModel, JSON.parse(uploadContent as string)))\n              }\n            });\n          },\n        })\n      } else {\n        message.error(\"导入文件有问题，导入失败\")\n      }\n    }\n    //读取文件内容\n    reader.readAsText(file);\n  }\n\n  function getOffsetString() {\n    let base = \"\" + currentDayOffset\n    if (currentDayOffset > 0) {\n      base = \"+\" + base\n    }\n    return base\n  }\n\n  function getAllTaskStatus(): string {\n    let notDoneTasks = storeModel.getTasks(DateUtils.getMyCurrentDayDur(currentDayOffset)).filter((task) => { return !task.isDone() })\n\n    if (notDoneTasks.length === 0) {\n      return \"\"\n    }\n\n    let consumeFormat = \"\"\n    let consumes: number = notDoneTasks.map((task) => {\n      let left = task.getLeftExpectConsumeTime()\n      if (left < 0) return 0\n      return left\n    }).reduce((a, b) => a + b)\n\n    // console.log(\"getAllTaskStatus\" + consumes)\n    if (consumes > 0) {\n      consumeFormat = `，总剩余预估需要花费${Format.formatDuration(consumes)}`\n    }\n\n    return `共${notDoneTasks.length}个任务未完成${consumeFormat}`\n  }\n\n  return (\n    <Container>\n\n      {/* todo 这个组件可以单独抽出去 */}\n      <ButtonGroup>\n        <Button type=\"primary\" size=\"small\" onClick={(e) => changeOffsetDay(false)}>←</Button>\n\n        {/* 这个取当前时间的操作简直无敌... 蠢 */}\n        {/* <DatePicker defaultValue={moment(moment().format(dateFormat), dateFormat)} format={dateFormat} /> */}\n\n        <span style={{ backgroundColor: \"#ffffff\", padding: 4 }} >\n          {Format.formatTimeInDay(DateUtils.getMyCurrentDayStamp(currentDayOffset))}({getOffsetString()})\n        </span>\n\n        <Button type=\"primary\" size=\"small\" onClick={(e) => changeOffsetDay(true)}>→</Button>\n        <span style={{ paddingLeft: 10 }} ></span>\n        <Button type=\"primary\" size=\"small\" onClick={(e) => download()}>导出</Button>\n        <input type=\"file\" id=\"upload-file\" multiple onChange={(event) => upload(event)} />\n        {/* <Button type=\"primary\" size=\"small\" onClick={(e) => download()}>导入</Button> */}\n      </ButtonGroup>\n\n      <Input.Group compact style={{ width: '96%', margin: '2%' }}>\n        <Input style={{ width: '80%' }} placeholder=\"输入任务，回车添加\" value={title} onChange={(event) => setTitle(event.target.value)} onPressEnter={onAddNote} />\n        <Input style={{ width: '20%' }} defaultValue={expectTime} placeholder=\"花费时间\" prefix=\"预计\" suffix=\"h\" onChange={(event) => setExpectTime(Number(event.target.value))} onPressEnter={onAddNote} />\n      </Input.Group>\n\n      <span style={{ backgroundColor: \"#ffffff\", padding: 4, margin: '2%' }} >\n        {getAllTaskStatus()}\n      </span>\n\n      <NoteList />\n    </Container>\n  );\n}\n\n\nconst NoteItem = styled.div`\nbackground-color: ${(props: { choosed: boolean, isDone: boolean }) => {\n    if (props.choosed) {\n      return '#f5b52b'\n    } else {\n      return '#ffffff'\n    }\n  }\n  };\n:hover{\n\tbackground-color:#b4e7fc;\n};\nopacity : ${(props: { choosed: boolean, isDone: boolean }) => {\n    if (props.isDone) {\n      return 0.15\n    } else {\n      return 1\n    }\n  }\n  };;\n`\nconst NoteList: React.FC = () => {\n  const { storeModel } = stores.useStore('mainmodel') as { storeModel: StoreModel };\n  const { currentTask, setCurrentTask } = stores.useStore(CurrentTaskKey) as { currentTask: Task | undefined, setCurrentTask: (note: Task) => void }\n  const { currentDoingTask, setCurrentDoingTask } = stores.useStore(CurrentDoingTaskKey) as { currentDoingTask: Task | undefined, setCurrentDoingTask: (note: Task | undefined) => void }\n  const { save } = stores.useStore('mainmodel') as { save: () => void };\n  const { currentDayOffset, setCurrentDayOffset } = stores.useStore(CurrentDayOffsetKey) as { currentDayOffset: number, setCurrentDayOffset: (offset: number) => void }\n\n  useEffect(() => {\n    // console.log(\"NoteList useEffect\")\n\n    if (currentDoingTask === undefined) {\n      let doingTasks = storeModel.tasks.filter((value) => { return value.isDoing() })\n\n      if(doingTasks.length === 0){\n        return\n      }\n\n      if (doingTasks.length > 1) {\n        console.error(`有 ${doingTasks.length} 个任务在运行中，自动关闭`)\n\n        for (let i = 1; i < doingTasks.length; i++) {\n          doingTasks[i].stop()\n        }\n      }\n\n      setCurrentDoingTask(doingTasks[0])\n    }\n  });\n\n  function onChooseNote(event: any, note: Task) {\n    event.preventDefault()\n    setCurrentTask(note)\n  }\n\n  const onClickMenu = (param: ClickParam, task: Task) => {\n    task.level = Number(param.key)\n\n    storeModel.orderTasks()\n    save()\n\n    param.domEvent.preventDefault()\n\n    // 怎么阻止对 parent 的点击事件\n    // param.domEvent.stopPropagation()\n  };\n\n  function getMenu(task: Task): React.ReactElement {\n    return (\n      <Menu onClick={(param) => onClickMenu(param, task)}>\n        <Menu.Item key=\"1\">优先级 1</Menu.Item>\n        <Menu.Item key=\"2\">优先级 2</Menu.Item>\n        <Menu.Item key=\"3\">优先级 3</Menu.Item>\n        <Menu.Item key=\"4\">优先级 4</Menu.Item>\n        <Menu.Item key=\"5\">优先级 5</Menu.Item>\n      </Menu>\n    )\n  }\n\n  function deleteTask(event: any, task: Task) {\n    Modal.confirm({\n      title: '确定要删除吗？',\n      content: `是否删除任务：${task.title}`,\n      onOk() {\n        if (storeModel.removeTask(task)) {\n          message.success(\"删除任务成功\")\n          save()\n        } else {\n          message.error(\"删除任务失败\")\n        }\n      },\n    });\n  }\n\n  function startTask(event: any, task: Task) {\n    if (task.isDone()) {\n      message.error(`任务已完成，完成时间:${Format.formatTimeInMs(task.doneTime)}`)\n      return\n    }\n\n    if (currentDoingTask != undefined && currentDoingTask.id === task.id) {\n      message.error(`任务已经在进行中，上次开始时间：${Format.formatTimeInMs(task.lastStartTime())}`)\n      return\n    }\n\n    if (task.isDoing()) {\n      // todo 自动恢复\n      message.error(`任务异常中断，重新开始。上次开始时间：${Format.formatTimeInMs(task.lastStartTime())}`)\n    }\n\n    if (currentDoingTask != undefined) {\n      currentDoingTask.stop()\n    }\n\n    task.start()\n    setCurrentDoingTask(task)\n    save()\n  }\n\n  function doneTask(event: any, task: Task) {\n    if (task.isDone()) {\n      message.error(`任务已完成，完成时间:${Format.formatTimeInMs(task.doneTime)}`)\n      return\n    }\n\n    if (!task.isDoing()) {\n      Modal.confirm({\n        title: '当前任务不在进行中，确定要完成吗？',\n        content: `是否完成任务：${task.title}`,\n        onOk() {\n          _realDone(task)\n        },\n      });\n      return\n    }\n\n    task.stop()\n    setCurrentDoingTask(undefined)\n    _realDone(task)\n  }\n\n  function _realDone(task: Task) {\n    task.done()\n    storeModel.orderTasks()\n    message.success(\"任务已完成\")\n    save()\n  }\n\n  function getDoingStatusTips(task: Task): string {\n    if (task.isDoing()) {\n      return \"施工中⛑ \"\n    } else {\n      return \"\"\n    }\n  }\n\n  function getConsumed(task: Task): string {\n    let time = Format.formatDuration(task.getAllDuration());\n    if (Utils.isStringEmpty(time)) {\n      return \"\"\n    }\n    return `已进行${time} 分${task.doingDurs.length}次 `\n  }\n\n  function getDeadline(task: Task): string {\n    let deadline = task.getActualDeadline()\n    if (deadline <= 0) {\n      return \"\"\n    }\n    const leftTime = deadline - Utils.getTimestamp();\n    if (leftTime <= 1000) {\n      return `已超期😱 `\n    }\n    let time = Format.formatDuration(leftTime);\n    return `剩余${time} `\n  }\n\n  function getConsumeExpected(task: Task): string {\n    if (task.getActualExpectConsume() <= 0) {\n      return \"\"\n    }\n\n    let left = task.getLeftExpectConsumeTime()\n    if (left <= 0) {\n      return `已超出预期${Format.formatDuration(-left)}`\n    } else {\n      return `还需${Format.formatDuration(left)}`\n    }\n  }\n\n  function getShowTips(task: Task): string {\n    let result = \"  \" + getDoingStatusTips(task) + getConsumed(task) + getDeadline(task) + getConsumeExpected(task)\n    return result\n  }\n\n  function onChooseDeadline(value: any, task: Task) {\n    // 整了半天，原来直接 valueOf() 就行，百度了半天\n    // if(value instanceof Moment){\n    //   let moment:Moment = value\n    //   console.log('onOk: ', moment.);\n    // }\n    // console.log('onOk: ', value.valueOf());\n\n    task.deadlines.push(value.valueOf())\n  }\n\n  function getDeadlineTime(task: Task): any {\n    const deadline = task.getActualDeadline();\n    if (deadline > 0) {\n      return moment(deadline)\n    }\n\n    return undefined\n  }\n\n  return (\n    <Container2>\n      <List\n        size=\"small\"\n        style={{ backgroundColor: 'white', margin: \"1%\" }}\n        bordered\n        dataSource={storeModel.getTasks(DateUtils.getMyCurrentDayDur(currentDayOffset))}\n        renderItem={task => (\n          <NoteItem choosed={task.isSameTask(currentTask)} key={task.id} onClick={(e) => onChooseNote(e, task)} isDone={task.isDone()}>\n            <ButtonGroup>\n              {/* 点击整行就是查看且开始，view是只查看不开始。暂时用不着吧 */}\n              {/* <Button type=\"primary\" size=\"small\">view</Button> */}\n              <Button type=\"primary\" size=\"small\" onClick={(e) => deleteTask(e, task)}>Delete</Button>\n              <Button type=\"primary\" size=\"small\" onClick={(e) => startTask(e, task)}>Start</Button>\n              {/* <Button type=\"primary\" size=\"small\" onClick={(e) => startTask(e, task)}>Stop</Button> */}\n              <Button type=\"primary\" size=\"small\" onClick={(e) => doneTask(e, task)}>Done</Button>\n              <Dropdown overlay={getMenu(task)}>\n                <a style={{ paddingLeft: 5 }} className=\"ant-dropdown-link\" onClick={e => e.preventDefault()}>\n                  {task.level} <DownOutlined />\n                </a>\n              </Dropdown>\n            </ButtonGroup>\n            {/* {task.id} */}\n            <DatePicker showTime defaultValue={getDeadlineTime(task)} onOk={value => onChooseDeadline(value, task)} size=\"small\" />\n            {getShowTips(task)}\n            <NoteItemInput key={task.id} task={task} />\n          </NoteItem>\n        )}\n      />\n    </Container2>\n  );\n}\n\ninterface NoteItemInputProps {\n  task: Task;\n}\n\nconst NoteItemInput: React.FC<NoteItemInputProps> = (props) => {\n  const [content, setContent] = useState(props.task.title)\n  const { save } = stores.useStore('mainmodel') as { save: () => void };\n\n  function saveTaskTitle(event: any) {\n    props.task.title = content\n    save()\n  }\n\n  return (\n    <Input value={content} onChange={(e) => setContent(e.target.value)} onBlur={saveTaskTitle} />\n  );\n}\n\nexport default TaskListContainer;","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Input, message, Button } from 'antd';\nimport stores from '../stores';\nimport { Task } from '../model/model'\nimport { CurrentTaskKey } from '../stores/CurrentTaskStore';\nimport 'antd/dist/antd.css';\n\nconst Container = styled.div`\n  background: #ffffff;\n  display: flex;\n  height: 100%;\n  flex-direction: column;\n`\n\nconst Editor = styled(Input.TextArea)`\n  flex-grow: 1;\n`\n\nconst ButtonGroup = styled(Button.Group)`\nmargin: 2px;\n`\n\nconst ContentLayout: React.FC = () => {\n  const { currentTask } = stores.useStore(CurrentTaskKey) as { currentTask: Task | undefined }\n  const { save } = stores.useStore('mainmodel') as { save: () => void };\n  const [content, setContent] = useState(\"\")\n\n  /* ---------------------------初始化------------------------------- */\n\n  // 渲染当前note\n  const [lastTask, setLastTask] = useState<Task | undefined>(undefined)\n  useEffect(() => {\n    // console.log(`Current content:${content}`)\n    if (currentTask === undefined) return\n\n    if (!currentTask.isSameTask(lastTask)) {\n      // todo 这里放同步应该不会有问题吧，最大的问题应该是前面切了note但没切content的时候进行保存...\n      setLastTask(currentTask)\n      setContent(currentTask.note.content)\n    }\n  })\n\n  /* ----------------------------保存Note文本------------------------------ */\n\n  function onBlur(event: any) {\n    event.preventDefault();\n    saveToLocal(event, false)\n  }\n\n  function saveToLocal(event: any, isManual: boolean) {\n    if (event) event.preventDefault();\n    if (currentTask === undefined) return\n    \n    currentTask.note.content = content\n    save()\n\n    if (isManual) message.info(\"已保存\")\n  }\n\n\n  /* ---------------------------------------------------------- */\n\n  return (\n    <Container>\n      <ButtonGroup>\n        <Button type=\"primary\" size=\"small\" onClick={(e) => saveToLocal(e, true)}>Save</Button>\n      </ButtonGroup>\n\n      <Editor\n        placeholder=\"任务日志（自动保存）\" value={content} onChange={(event) => setContent(event.target.value)} onBlur={(e) => onBlur(e)}\n      />\n    </Container>\n  );\n}\n\nexport default ContentLayout;","import 'reflect-metadata'\nimport React,{useState} from 'react';\nimport styled from 'styled-components';\nimport TaskListContainer from './TaskListContainer'\nimport ContentLayout from './ContentLayout'\n\n\nconst AppContainer = styled.div`\n  display: grid;\n  min-height: 100vh;\n  height: 100%;\n  width: 100%;\n  grid-template-columns: 50% 50%;\n  grid-template-rows: 100%;\n`\n\nconst App: React.FC = () => {\n  // React.useEffect(() => {\n  //   console.log(\"app useEffect\")\n  // },[])\n\n  return (\n    <AppContainer>\n      <TaskListContainer/>\n      <ContentLayout/>\n    </AppContainer>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './layouts/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n\n"],"sourceRoot":""}