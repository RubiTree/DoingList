(this.webpackJsonpdoinglist2=this.webpackJsonpdoinglist2||[]).push([[0],{185:function(e,t,n){e.exports=n(338)},190:function(e,t,n){},338:function(e,t,n){"use strict";n.r(t);var r,a,i,o,u,s,c,l,f=n(0),d=n.n(f),g=n(3),m=n.n(g),h=(n(190),n(18)),v=(n(91),n(19)),p=n(11),D=n(348),k=n(13),y=n(352),b=n(347),T=n(342),O=n(346),C=n(345),E=n(343),j=n(344),S=n(350),M=n(351),w=n(116),x=n(16),I=n(23),P=n(117),A=(n(191),function(){function e(){Object(x.a)(this,e)}return Object(I.a)(e,null,[{key:"isStringEmpty",value:function(e){return"undefined"===typeof e||null===e||""===e}},{key:"exportContentToClipboard",value:function(e){var t=document.createElement("textarea");t.style.cssText="width:30%;padding:2%;min-width: 100px;opacity: 0.5;color: rgb(255, 255, 255);line-height: 18px;text-align: center;border-radius: 5px;position: fixed;top: 50%;left: 30%;z-index: 999999;background: rgb(0, 0, 0);font-size: 15px;",document.body.appendChild(t),t.value=e,t.focus(),t.select(),document.execCommand("copy")&&document.execCommand("copy"),t.blur(),document.body.removeChild(t)}},{key:"downloadFile",value:function(e,t){console.log("download");var n=document.createElement("a");n.download=e,n.style.display="none";var r=new Blob([t]);n.href=URL.createObjectURL(r),document.body.appendChild(n),n.click(),document.body.removeChild(n)}},{key:"generateId",value:function(){return(new Date).getTime()}},{key:"getTimestamp",value:function(){return(new Date).getTime()}},{key:"match",value:function(e,t){return e.search(new RegExp(t,"i"))>-1}},{key:"matchs",value:function(e,t){return e.search(t)>-1}},{key:"getRandomColor",value:function(){return"#"+(16777215*Math.random()<<0).toString(16)}},{key:"hasIntersection",value:function(e,t,n,r){return!(r<e||t<n)}},{key:"removeObject",value:function(e,t){for(var n=this.length,r=0;r<n;r++)if(e[r]===t)return 0===r?e.shift():r===n-1?e.pop():e.splice(r,1),!0;return!1}}]),e}()),N=n(42),H=(r=Object(N.Type)((function(){return L})),u=o=function(){function e(){Object(x.a)(this,e),this.id=-1,this.title="undefine",this.note=new F,this.level=3,this.createTime=-1,this.doneTime=-1,this.pendingDeadline=-1,this.pendingReason="",this.deadlines=[],this.expectConsumes=[],Object(w.a)(this,"doingDurs",i,this)}return Object(I.a)(e,[{key:"init",value:function(t){this.title=t,this.createTime=A.getTimestamp(),this.id=A.generateId()+e.idCounter,e.idCounter=e.idCounter+1e3}},{key:"isSameTask",value:function(e){return void 0!==e&&this.id===e.id}},{key:"isDoing",value:function(){return 0!==this.doingDurs.length&&-1===this.doingDurs[this.doingDurs.length-1].end}},{key:"lastStartTime",value:function(){return 0===this.doingDurs.length?-1:this.doingDurs[this.doingDurs.length-1].start}},{key:"start",value:function(){var e=new L;e.init(A.getTimestamp()),this.doingDurs.push(e)}},{key:"stop",value:function(){this.doingDurs[this.doingDurs.length-1].end=A.getTimestamp()}},{key:"stopDelay",value:function(e){this.doingDurs[this.doingDurs.length-1].end=A.getTimestamp()+e}},{key:"isDone",value:function(){return-1!==this.doneTime}},{key:"isPending",value:function(){return-1!==this.pendingDeadline}},{key:"isDangerousPending",value:function(){return this.isTimeDangers(this.pendingDeadline)}},{key:"isDangerousDeadline",value:function(){return this.isTimeDangers(this.getActualDeadline())}},{key:"isDangerous",value:function(){return this.isDangerousPending()||this.isDangerousDeadline()}},{key:"isTimeDangers",value:function(e){return!(e<=0)&&e-A.getTimestamp()<=72e5}},{key:"done",value:function(){this.doneTime=A.getTimestamp()}},{key:"getAllDuration",value:function(){var e=this;return 0===this.doingDurs.length?0:this.doingDurs.map((function(t,n){return t.getDur(n===e.doingDurs.length-1)})).reduce((function(e,t){return e+t}))}},{key:"getActualDeadline",value:function(){return 0===this.deadlines.length?-1:this.deadlines[this.deadlines.length-1]}},{key:"getActualExpectConsume",value:function(){return 0===this.expectConsumes.length?-1:this.expectConsumes[this.expectConsumes.length-1]}},{key:"getLeftExpectConsumeTime",value:function(){var e=this.getActualExpectConsume()-this.getAllDuration();return e<0&&console.error("\u8d85\u51fa\u9884\u671f\u65f6\u95f4"),e}}]),e}(),o.idCounter=0,a=u,i=Object(P.a)(a.prototype,"doingDurs",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),a),L=function(){function e(){Object(x.a)(this,e),this.start=-1,this.end=-1}return Object(I.a)(e,[{key:"init",value:function(e){this.start=e}},{key:"init2",value:function(e,t){this.start=e,void 0!=t&&(this.end=t)}},{key:"isIn",value:function(e){return e>=this.start&&e<=this.end}},{key:"getDur",value:function(e){var t=this.end;return-1==t&&e&&(t=A.getTimestamp()),-1==t?(console.error("\u8fd9\u6bb5\u65f6\u95f4\u672a\u7ed3\u675f"),0):t-this.start}},{key:"isValid",value:function(e){return!(!e&&-1==this.end)}}]),e}(),F=function e(){Object(x.a)(this,e),this.content=""},K=(s=Object(N.Type)((function(){return H})),c=function(){function e(){Object(x.a)(this,e),Object(w.a)(this,"tasks",l,this)}return Object(I.a)(e,[{key:"getTasks",value:function(e){return this.tasks.filter((function(t){return!t.isDone()||e.isIn(t.doneTime)}))}},{key:"addTask",value:function(e){this.containsProject(e.id)||this.tasks.push(e)}},{key:"removeTask",value:function(e){if(!this.containsProject(e.id))return!1;for(var t=this.tasks.length,n=0;n<t;n++)if(this.tasks[n].id===e.id)return 0===n?this.tasks.shift():n===t-1?this.tasks.pop():this.tasks.splice(n,1),!0;return!1}},{key:"containsProject",value:function(e){return void 0!==this.tasks.find((function(t){return t.id===e}))}},{key:"orderTasks",value:function(){this.tasks.sort((function(e,t){return e.isDone()&&!t.isDone()?1:!e.isDone()&&t.isDone()||e.isDoing()?-1:t.isDoing()?1:e.isDangerous()&&!t.isDangerous()?-1:!e.isDangerous()&&t.isDangerous()||e.level>t.level?1:e.level<t.level||e.createTime>t.createTime?-1:e.createTime<t.createTime?1:0}))}}]),e}(),l=Object(P.a)(c.prototype,"tasks",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c),z={isDebug:!1,fetch:function(){if(this.isDebug)return this._getMockStoreModel();var e=new K,t=localStorage.getItem("DoingList3");return null!=t?Object(N.plainToClass)(K,JSON.parse(t)):e},save:function(e){localStorage.setItem("DoingList3",JSON.stringify(e))},_getMockStoreModel:function(){for(var e=new K,t=0;t<12;t++){var n=new H;n.init("\u6211\u7684\u7b2c "+t+" \u4e2a\u4efb\u52a1"),e.addTask(n)}return e}},R={storeModel:z.fetch(),save:function(){z.save(this.storeModel)},setModel:function(e){this.storeModel=e,this.save()}},_=n(152),J={currentTask:void 0,setCurrentTask:function(e){this.currentTask=e}},B={currentDoingTask:void 0,setCurrentDoingTask:function(e){this.currentDoingTask=e}},G=new(n.n(_).a);G.registerStore("mainmodel",R),G.registerStore("CurrentTaskKey",J),G.registerStore("CurrentDoingTaskKey",B),G.registerStore("CurrentDayOffsetKey",{currentDayOffset:0,setCurrentDayOffset:function(e){this.currentDayOffset=e}});var Y=G,V=function(){function e(){Object(x.a)(this,e)}return Object(I.a)(e,null,[{key:"getCurrentDayStamp",value:function(e){var t=new Date;return t.setHours(e,0,0,0),t.getTime()}},{key:"getOffsetedDayDur",value:function(t,n){var r=new Date(t);r.setHours(n,0,0,0);var a=new L;return a.init(r.getTime()),a.end=r.getTime()+e.dayMills,a}},{key:"getMyCurrentDayStamp",value:function(t){return(new Date).getTime()>e.getCurrentDayStamp(e.dayOffset)?e.getCurrentDayStamp(0)+e.dayMills*t:e.getCurrentDayStamp(0)-e.dayMills+e.dayMills*t}},{key:"getMyCurrentDayDur",value:function(t){return e.getOffsetedDayDur(e.getMyCurrentDayStamp(t),e.dayOffset)}}]),e}();V.dayMills=864e5,V.dayOffset=6;var W=V,U=function(){function e(){Object(x.a)(this,e)}return Object(I.a)(e,null,[{key:"formatTimeInMs",value:function(e){var t=new Date(e),n=t.getFullYear()+"-",r=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",a=(t.getDate()<10?"0"+t.getDate():t.getDate())+" ",i=(t.getHours()<10?"0"+t.getHours():t.getHours())+":",o=(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":",u=(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())+":",s=t.getMilliseconds();return"["+n+r+a+i+o+u+(s<10?"00"+s:s<100?"0"+s:""+s)+"]"}},{key:"formatTimeInMsToFileName",value:function(e){var t=new Date(e),n=t.getFullYear()+"_",r=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"_",a=(t.getDate()<10?"0"+t.getDate():t.getDate())+" ",i=(t.getHours()<10?"0"+t.getHours():t.getHours())+"_",o=(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+"_",u=(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())+"_",s=t.getMilliseconds();return n+r+a+i+o+u+(s<10?"00"+s:s<100?"0"+s:""+s)}},{key:"formatTimeInMinute",value:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())}},{key:"formatTimeInDay",value:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+(t.getDate()<10?"0"+t.getDate():t.getDate())}},{key:"formatDuration",value:function(e){e<0&&(e=-e);var t={"\u5929":Math.floor(e/864e5),"\u5c0f\u65f6":Math.floor(e/36e5)%24,"\u5206":Math.floor(e/6e4)%60,"\u79d2":Math.floor(e/1e3)%60};return Object.entries(t).filter((function(e){return 0!==e[1]})).map((function(e){var t=Object(p.a)(e,2),n=t[0],r=t[1];return"".concat(r).concat(n)})).join("")}},{key:"formatDuration2",value:function(e){e<0&&(e=-e);var t={d:Math.floor(e/864e5),h:Math.floor(e/36e5)%24,m:Math.floor(e/6e4)%60,s:Math.floor(e/1e3)%60};return t.d>0&&(t.m=0,t.s=0),t.h>0&&(t.s=0),Object.entries(t).filter((function(e){return 0!==e[1]})).map((function(e){var t=Object(p.a)(e,2),n=t[0],r=t[1];return"".concat(r).concat(n)})).join("")}}]),e}(),$=function(){function e(){Object(x.a)(this,e)}return Object(I.a)(e,null,[{key:"getDoingStatusTips",value:function(e){return e.isDoing()?"\u65bd\u5de5\u4e2d\u26d1 ":""}},{key:"getConsumed",value:function(e){var t=U.formatDuration2(e.getAllDuration());return A.isStringEmpty(t)?"":"\u8fdb\u884c".concat(t,"(").concat(e.doingDurs.length,"\u6b21) ")}},{key:"getDeadline",value:function(t){var n=e.getPendingStatus(t);return A.isStringEmpty(n)?e.getDeadlineStatus(t):n}},{key:"getDeadlineStatus",value:function(e){var t=e.getActualDeadline();if(t<=0)return"";var n=t-A.getTimestamp();if(n<=1e3)return"Dead\u5df2\u8d85\u671f\ud83d\ude31 ";var r=U.formatDuration2(n);return"Dead\u5269\u4f59".concat(r," ")}},{key:"getPendingStatus",value:function(e){var t=e.pendingDeadline;if(t<=0)return"";var n=t-A.getTimestamp();if(n<=1e3)return"Pend\u5df2\u8d85\u671f\ud83d\ude31 ";var r=U.formatDuration2(n);return"Pend\u5269\u4f59".concat(r," ")}},{key:"getConsumeExpected",value:function(e){if(e.getActualExpectConsume()<=0)return"";var t=e.getLeftExpectConsumeTime();return t<=0?"\u8d85\u51fa".concat(U.formatDuration2(-t)):"\u8fd8\u9700".concat(U.formatDuration2(t))}}]),e}();n(127);function q(){var e=Object(h.a)(["\n:hover{\n\t/* background-color:#b4e7fc; */\n  background-color: ","\n};\nbackground-color: ",";\nopacity : ",";;\n"]);return q=function(){return e},e}function Q(){var e=Object(h.a)(["\nmargin: 1%;\n"]);return Q=function(){return e},e}function X(){var e=Object(h.a)(["\nmargin: 1%;\n"]);return X=function(){return e},e}function Z(){var e=Object(h.a)(["\n  /* background: #d1d3a2; */\n  /* background: #d1dfff; */\n  background: #282c34;\n  overflow:auto;\n  /* height: 800px; */\n  height: 85vh;\n  margin-top:10px;\n"]);return Z=function(){return e},e}function ee(){var e=Object(h.a)(["\n  /* background: #d1d3a2; */\n  /* background: #d1dfff; */\n  background: #282c34;\n"]);return ee=function(){return e},e}var te=v.a.div(ee()),ne=v.a.div(Z()),re=(Object(v.a)(D.a.Group)(X()),Object(v.a)(k.a.Group)(Q())),ae=v.a.div(q(),(function(e){return e.choosed?"#f5b52b":"#b4e7fc"}),(function(e){return e.choosed?"#f5b52b":"#ffffff"}),(function(e){return e.isDone?.15:1})),ie=function(){var e=Y.useStore("mainmodel").storeModel,t=Y.useStore("CurrentTaskKey"),n=t.currentTask,r=t.setCurrentTask,a=Y.useStore("CurrentDoingTaskKey"),i=a.currentDoingTask,o=a.setCurrentDoingTask,u=Y.useStore("mainmodel").save,s=Y.useStore("CurrentDayOffsetKey"),c=s.currentDayOffset;s.setCurrentDayOffset;Object(f.useEffect)((function(){if(void 0===i){var t=e.tasks.filter((function(e){return e.isDoing()}));if(0===t.length)return;if(t.length>1){console.error("\u6709 ".concat(t.length," \u4e2a\u4efb\u52a1\u5728\u8fd0\u884c\u4e2d\uff0c\u81ea\u52a8\u5173\u95ed"));for(var n=1;n<t.length;n++)t[n].stop()}o(t[0])}}));function l(t){return d.a.createElement(O.a,{onClick:function(n){return function(t,n){n.level=Number(t.key),e.orderTasks(),u(),t.domEvent.preventDefault()}(n,t)}},d.a.createElement(O.a.Item,{key:"1"},"\u4f18\u5148\u7ea7 1"),d.a.createElement(O.a.Item,{key:"2"},"\u4f18\u5148\u7ea7 2"),d.a.createElement(O.a.Item,{key:"3"},"\u4f18\u5148\u7ea7 3"),d.a.createElement(O.a.Item,{key:"4"},"\u4f18\u5148\u7ea7 4"),d.a.createElement(O.a.Item,{key:"5"},"\u4f18\u5148\u7ea7 5"))}return d.a.createElement(ne,null,d.a.createElement(C.a,{size:"small",style:{backgroundColor:"white",margin:"1%"},bordered:!0,dataSource:e.getTasks(W.getMyCurrentDayDur(c)),renderItem:function(t){return d.a.createElement(ae,{choosed:t.isSameTask(n),key:t.id,onClick:function(e){return n=t,e.preventDefault(),void r(n);var n},isDone:t.isDone()},d.a.createElement(E.a,null,d.a.createElement(j.a,{flex:"1 1 auto"},d.a.createElement(oe,{key:t.id,task:t})),d.a.createElement(j.a,{flex:"0 1 auto"},function(e){return"  "+$.getDoingStatusTips(e)+$.getDeadline(e)+$.getConsumeExpected(e)}(t),d.a.createElement(S.a,{overlay:l(t)},d.a.createElement("a",{style:{paddingLeft:5},className:"ant-dropdown-link",onClick:function(e){return e.preventDefault()}},function(e){switch(e){case 1:return"\u2757";case 2:return"\ud83c\udf8f";case 3:return"3\ufe0f\u20e3";case 4:return"4\ufe0f";case 5:return"5\ufe0f";default:return""}}(t.level)," ",d.a.createElement(M.a,null))),d.a.createElement(k.a,{onClick:function(n){return function(t,n){n.isDone()?y.a.error("\u4efb\u52a1\u5df2\u5b8c\u6210\uff0c\u5b8c\u6210\u65f6\u95f4:".concat(U.formatTimeInMs(n.doneTime))):void 0==i||i.id!==n.id?(n.isDoing()&&y.a.error("\u4efb\u52a1\u5f02\u5e38\u4e2d\u65ad\uff0c\u91cd\u65b0\u5f00\u59cb\u3002\u4e0a\u6b21\u5f00\u59cb\u65f6\u95f4\uff1a".concat(U.formatTimeInMs(n.lastStartTime()))),void 0!=i&&i.stop(),n.start(),o(n),e.orderTasks(),u()):y.a.error("\u4efb\u52a1\u5df2\u7ecf\u5728\u8fdb\u884c\u4e2d\uff0c\u4e0a\u6b21\u5f00\u59cb\u65f6\u95f4\uff1a".concat(U.formatTimeInMs(n.lastStartTime())))}(0,t)}},"Start"))))}}))},oe=function(e){var t=Object(f.useState)(e.task.title),n=Object(p.a)(t,2),r=n[0],a=n[1],i=Y.useStore("mainmodel").save;return d.a.createElement(D.a,{style:{background:"#ffffff70",fontWeight:"bold"},value:r,onChange:function(e){return a(e.target.value)},onBlur:function(t){e.task.title=r,i()}})},ue=function(){var e=Y.useStore("mainmodel"),t=e.storeModel,n=e.save,r=e.setModel,a=Y.useStore("CurrentDayOffsetKey"),i=a.currentDayOffset,o=a.setCurrentDayOffset,u=Object(f.useState)(""),s=Object(p.a)(u,2),c=s[0],l=s[1],g=Object(f.useState)(!0),m=Object(p.a)(g,2),h=m[0],v=m[1],O=Object(f.useState)(2),C=Object(p.a)(O,2),E=C[0],j=C[1];function S(e){if(e.preventDefault(),A.isStringEmpty(c))y.a.error("\u8bf7\u8f93\u5165\u5185\u5bb9");else{var r=new H;r.init(c),h?r.expectConsumes.push(3600*E*1e3):r.expectConsumes.push(-1),t.addTask(r),t.orderTasks(),n(),l("")}}function M(e){o(e?i+1:i-1)}function w(){A.downloadFile("DoingList_".concat(U.formatTimeInMsToFileName(A.getTimestamp()),".dl"),JSON.stringify(t))}return d.a.createElement(te,null,d.a.createElement(re,null,d.a.createElement(k.a,{type:"primary",size:"small",onClick:function(e){return M(!1)}},"\u2190"),d.a.createElement("span",{style:{backgroundColor:"#ffffff",padding:4}},U.formatTimeInDay(W.getMyCurrentDayStamp(i)),"(",function(){var e=""+i;return i>0&&(e="+"+e),e}(),")"),d.a.createElement(k.a,{type:"primary",size:"small",onClick:function(e){return M(!0)}},"\u2192"),d.a.createElement("span",{style:{paddingLeft:10}}),d.a.createElement(k.a,{type:"primary",size:"small",onClick:function(e){return w()}},"\u5bfc\u51fa"),d.a.createElement("input",{type:"file",id:"upload-file",multiple:!0,onChange:function(e){return function(e){var t=e.target.files[0];console.log(t);var n=new FileReader;n.onload=function(){var e=this.result;"string"===typeof e?b.a.confirm({title:"\u786e\u5b9a\u8981\u5bfc\u5165\u561b\uff1f",content:"\u5bfc\u5165\u4f1a\u8986\u76d6\u5f53\u524d\u6240\u6709\u4efb\u52a1",onOk:function(){b.a.confirm({title:"\u662f\u5426\u9700\u8981\u5148\u4e0b\u8f7d\u5f53\u524d\u4efb\u52a1\uff1f",content:"",onOk:function(){w(),r(Object(N.plainToClass)(K,JSON.parse(e)))},onCancel:function(){r(Object(N.plainToClass)(K,JSON.parse(e)))}})}}):y.a.error("\u5bfc\u5165\u6587\u4ef6\u6709\u95ee\u9898\uff0c\u5bfc\u5165\u5931\u8d25")},n.readAsText(t)}(e)}})),d.a.createElement(D.a.Group,{compact:!0,style:{width:"96%",margin:"2%",backgroundColor:"#ffffff"}},d.a.createElement(D.a,{style:{width:"60%"},placeholder:"\u8f93\u5165\u4efb\u52a1\uff0c\u56de\u8f66\u6dfb\u52a0",value:c,onChange:function(e){return l(e.target.value)},onPressEnter:S}),d.a.createElement(T.a,{checkedChildren:"\u4f30\u65f6",unCheckedChildren:"\u4e0d\u4f30\u65f6",defaultChecked:h,onChange:function(e){return v(e)}}),d.a.createElement(D.a,{style:{width:"20%"},defaultValue:E,placeholder:"\u82b1\u8d39\u65f6\u95f4",prefix:"\u9884\u8ba1",suffix:"h",onChange:function(e){return j(Number(e.target.value))},onPressEnter:S})),d.a.createElement("span",{style:{backgroundColor:"#ffffff",padding:4,margin:"2%"}},function(){var e=t.getTasks(W.getMyCurrentDayDur(i)).filter((function(e){return!e.isDone()}));if(0===e.length)return"";var n="",r=e.map((function(e){var t=e.getLeftExpectConsumeTime();return t<0?0:t})).reduce((function(e,t){return e+t}));return r>0&&(n="\uff0c\u603b\u5269\u4f59\u9884\u4f30\u9700\u8981\u82b1\u8d39".concat(U.formatDuration(r))),"\u5171".concat(e.length,"\u4e2a\u4efb\u52a1\u672a\u5b8c\u6210").concat(n)}()),d.a.createElement(ie,null))},se=n(349),ce=n(88),le=n.n(ce);function fe(){var e=Object(h.a)(["\nmargin: 2px;\n"]);return fe=function(){return e},e}function de(){var e=Object(h.a)(["\n  flex-grow: 1;\n"]);return de=function(){return e},e}function ge(){var e=Object(h.a)(["\n"]);return ge=function(){return e},e}function me(){var e=Object(h.a)(["\n  background: #ffffff;\n  display: flex;\n  height: 100%;\n  flex-direction: column;\n"]);return me=function(){return e},e}var he=v.a.div(me()),ve=v.a.div(ge()),pe=Object(v.a)(D.a.TextArea)(de()),De=Object(v.a)(k.a.Group)(fe()),ke=function(){var e=Y.useStore("mainmodel").storeModel,t=Y.useStore("CurrentTaskKey").currentTask,n=Y.useStore("mainmodel").save,r=Object(f.useState)(""),a=Object(p.a)(r,2),i=a[0],o=a[1],u=Object(f.useState)(-1),s=Object(p.a)(u,2),c=s[0],l=s[1],g=Object(f.useState)(!1),m=Object(p.a)(g,2),h=m[0],v=m[1],O=Object(f.useState)(""),C=Object(p.a)(O,2),E=C[0],j=C[1],S=Object(f.useState)(null),M=Object(p.a)(S,2),w=M[0],x=M[1],I=Y.useStore("CurrentDoingTaskKey"),P=(I.currentDoingTask,I.setCurrentDoingTask),A=Object(f.useState)(void 0),N=Object(p.a)(A,2),H=N[0],L=N[1];function F(e){e.preventDefault(),function(e,r){e&&e.preventDefault();if(void 0===t)return;t.note.content=i,n(),r&&y.a.info("\u5df2\u4fdd\u5b58")}(e,!1)}function K(t){t.done(),e.orderTasks(),y.a.success("\u4efb\u52a1\u5df2\u5b8c\u6210"),n()}function z(e){var t=e.pendingDeadline;return t>0?le()(t):null}return Object(f.useEffect)((function(){if(void 0!==t&&!t.isSameTask(H)){L(t),o(t.note.content);var e=t.getActualExpectConsume();l(-1==e?e:e/36e5),v(t.isPending()),j(t.pendingReason),x(z(t))}})),d.a.createElement(he,null,d.a.createElement(ve,null,d.a.createElement(De,null,d.a.createElement(k.a,{onClick:function(r){void 0!==t&&b.a.confirm({title:"\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",content:"\u662f\u5426\u5220\u9664\u4efb\u52a1\uff1a".concat(t.title),onOk:function(){e.removeTask(t)?(y.a.success("\u5220\u9664\u4efb\u52a1\u6210\u529f"),n()):y.a.error("\u5220\u9664\u4efb\u52a1\u5931\u8d25")}})}},"D"),d.a.createElement(k.a,{onClick:function(e){return function(e){if(void 0!==t){var n=t;n.isDone()?y.a.error("\u4efb\u52a1\u5df2\u5b8c\u6210\uff0c\u5b8c\u6210\u65f6\u95f4:".concat(U.formatTimeInMs(n.doneTime))):n.isDoing()?(n.stop(),P(void 0),K(n)):b.a.confirm({title:"\u5f53\u524d\u4efb\u52a1\u4e0d\u5728\u8fdb\u884c\u4e2d\uff0c\u786e\u5b9a\u8981\u5b8c\u6210\u5417\uff1f",content:"\u662f\u5426\u5b8c\u6210\u4efb\u52a1\uff1a".concat(n.title),onOk:function(){K(n)}})}}()}},"Done")),d.a.createElement(se.a,{showTime:!0,defaultValue:function(){if(void 0!==t){var e=t.getActualDeadline();return e>0?le()(e):void 0}}(),onOk:function(e){return function(e){void 0!==t&&(t.deadlines.push(e.valueOf()),n())}(e)}}),function(){if(void 0===t)return"";var e=t;return"  "+$.getDoingStatusTips(e)+$.getConsumed(e)+$.getDeadline(e)+$.getConsumeExpected(e)}(),d.a.createElement(D.a,{style:{width:"auto"},value:c,placeholder:"\u82b1\u8d39\u65f6\u95f4 \u56de\u8f66\u4fdd\u5b58",prefix:"\u9884\u8ba1",suffix:"h",onChange:function(e){return l(Number(e.target.value))},onPressEnter:function(){if(void 0!==t){var e=t;-1==c?e.expectConsumes.push(-1):e.expectConsumes.push(3600*c*1e3)}}})),d.a.createElement(ve,null,d.a.createElement(T.a,{checkedChildren:"Pending",unCheckedChildren:"No Pending",checked:h,onChange:function(e){return r=e,void(void 0!==t&&(r||(t.pendingDeadline=-1),v(r),n()));var r}}),d.a.createElement(se.a,{showTime:!0,value:w,onOk:function(e){return function(e){if(void 0!==t){var r=t;if(h){var a=e.valueOf(),i=r.getActualDeadline();i>0&&a>i?y.a.error("Pending\u65f6\u95f4(".concat(U.formatTimeInMinute(a),")\u665a\u4e8eDeadline(").concat(U.formatTimeInMinute(i),")\uff0c\u8bf7\u91cd\u65b0\u8bbe\u7f6e")):(r.pendingDeadline=a,x(z(r)),n())}else y.a.error("\u8bbe\u7f6e\u65e0\u6548\uff0c\u8bf7\u6253\u5f00 pending \u5f00\u5173\u540e\u91cd\u65b0\u8bbe\u7f6e")}}(e)}}),d.a.createElement(D.a,{style:{width:"auto"},value:E,prefix:"\u539f\u56e0:",placeholder:"\u81ea\u52a8\u4fdd\u5b58",onChange:function(e){return j(e.target.value)},onBlur:function(){void 0!==t&&(t.pendingReason=E,n())}})),d.a.createElement(pe,{placeholder:"\u4efb\u52a1\u65e5\u5fd7\uff08\u81ea\u52a8\u4fdd\u5b58\uff09",value:i,onChange:function(e){return o(e.target.value)},onBlur:function(e){return F(e)}}))};function ye(){var e=Object(h.a)(["\n  display: grid;\n  min-height: 100vh;\n  height: 100%;\n  width: 100%;\n  grid-template-columns: 50% 50%;\n  grid-template-rows: 100%;\n"]);return ye=function(){return e},e}var be=v.a.div(ye()),Te=function(){return d.a.createElement(be,null,d.a.createElement(ue,null),d.a.createElement(ke,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));m.a.render(d.a.createElement(Te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[185,1,2]]]);
//# sourceMappingURL=main.b88d7610.chunk.js.map