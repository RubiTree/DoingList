(this.webpackJsonpdoinglist2=this.webpackJsonpdoinglist2||[]).push([[0],{185:function(e,t,n){e.exports=n(338)},190:function(e,t,n){},338:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(3),o=n.n(i),u=(n(190),n(11)),c=(n(79),n(12)),s=n(7),l=n(348),f=n(17),m=n(352),d=n(347),g=n(346),h=n(342),p=n(343),v=n(351),y=n(344),k=n(349),D=n(345),b=n(350),T=n(69),O=n(14),C=n(15),S=n(70),x=(n(191),function(){function e(){Object(O.a)(this,e)}return Object(C.a)(e,null,[{key:"isStringEmpty",value:function(e){return"undefined"===typeof e||null===e||""===e}},{key:"exportContentToClipboard",value:function(e){var t=document.createElement("textarea");t.style.cssText="width:30%;padding:2%;min-width: 100px;opacity: 0.5;color: rgb(255, 255, 255);line-height: 18px;text-align: center;border-radius: 5px;position: fixed;top: 50%;left: 30%;z-index: 999999;background: rgb(0, 0, 0);font-size: 15px;",document.body.appendChild(t),t.value=e,t.focus(),t.select(),document.execCommand("copy")&&document.execCommand("copy"),t.blur(),document.body.removeChild(t)}},{key:"downloadFile",value:function(e,t){console.log("download");var n=document.createElement("a");n.download=e,n.style.display="none";var a=new Blob([t]);n.href=URL.createObjectURL(a),document.body.appendChild(n),n.click(),document.body.removeChild(n)}},{key:"generateId",value:function(){return(new Date).getTime()}},{key:"getTimestamp",value:function(){return(new Date).getTime()}},{key:"match",value:function(e,t){return e.search(new RegExp(t,"i"))>-1}},{key:"matchs",value:function(e,t){return e.search(t)>-1}},{key:"getRandomColor",value:function(){return"#"+(16777215*Math.random()<<0).toString(16)}},{key:"hasIntersection",value:function(e,t,n,a){return!(a<e||t<n)}},{key:"removeObject",value:function(e,t){for(var n=this.length,a=0;a<n;a++)if(e[a]===t)return 0===a?e.shift():a===n-1?e.pop():e.splice(a,1),!0;return!1}}]),e}()),j=n(27),E=function(){function e(){Object(O.a)(this,e)}return Object(C.a)(e,null,[{key:"getCurrentDayStamp",value:function(e){var t=new Date;return t.setHours(e,0,0,0),t.getTime()}},{key:"getSomeDayStamp",value:function(e,t){var n=new Date(e);return n.setHours(t,0,0,0),n.getTime()}},{key:"getOffsetedDayDur",value:function(t,n){var a=new Date(t);a.setHours(n,0,0,0);var r=new Y;return r.init(a.getTime()),r.end=a.getTime()+e.dayMills,r}},{key:"getMyCurrentDayStamp",value:function(t,n){return(new Date).getTime()>e.getCurrentDayStamp(n)?e.getCurrentDayStamp(0)+e.dayMills*t:e.getCurrentDayStamp(0)-e.dayMills+e.dayMills*t}},{key:"getMyCurrentDayDur",value:function(t){return e.getOffsetedDayDur(e.getMyCurrentDayStamp(t,e.dayOffset),e.dayOffset)}},{key:"getMyCurrentDayDur2",value:function(t){return e.getOffsetedDayDur(e.getMyCurrentDayStamp(t,0),0)}},{key:"isSameDay",value:function(e,t){return new Date(e).getDay()===new Date(t).getDay()}}]),e}();E.dayMills=864e5,E.dayOffset=6;var M,w,L,I,R,N,_,A,P,H,z,F,K,U,B,J=E,G=function(){function e(){Object(O.a)(this,e)}return Object(C.a)(e,null,[{key:"formatTimeInMs",value:function(e){var t=new Date(e),n=t.getFullYear()+"-",a=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",r=(t.getDate()<10?"0"+t.getDate():t.getDate())+" ",i=(t.getHours()<10?"0"+t.getHours():t.getHours())+":",o=(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":",u=(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())+":",c=t.getMilliseconds();return"["+n+a+r+i+o+u+(c<10?"00"+c:c<100?"0"+c:""+c)+"]"}},{key:"formatTimeInMsToFileName",value:function(e){var t=new Date(e),n=t.getFullYear()+"_",a=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"_",r=(t.getDate()<10?"0"+t.getDate():t.getDate())+" ",i=(t.getHours()<10?"0"+t.getHours():t.getHours())+"_",o=(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+"_",u=(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())+"_",c=t.getMilliseconds();return n+a+r+i+o+u+(c<10?"00"+c:c<100?"0"+c:""+c)}},{key:"formatTimeInMinute",value:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())}},{key:"formatTimeInSecond",value:function(e){var t=new Date(e);return"["+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())+"]"}},{key:"formatTimeInDay",value:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+(t.getDate()<10?"0"+t.getDate():t.getDate())}},{key:"formatTimeInDay2",value:function(e){var t=new Date(e);return(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())}},{key:"formatDuration",value:function(e){e<0&&(e=-e);var t={"\u5929":Math.floor(e/864e5),"\u5c0f\u65f6":Math.floor(e/36e5)%24,"\u5206":Math.floor(e/6e4)%60,"\u79d2":Math.floor(e/1e3)%60};return Object.entries(t).filter((function(e){return 0!==e[1]})).map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return"".concat(a).concat(n)})).join("")}},{key:"formatDuration2",value:function(e){e<0&&(e=-e);var t={d:Math.floor(e/864e5),h:Math.floor(e/36e5)%24,m:Math.floor(e/6e4)%60,s:Math.floor(e/1e3)%60};return t.d>0&&(t.m=0,t.s=0),t.h>0&&(t.s=0),Object.entries(t).filter((function(e){return 0!==e[1]})).map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return"".concat(a).concat(n)})).join("")}}]),e}(),W=(M=Object(j.Type)((function(){return $})),w=Object(j.Type)((function(){return Y})),_=N=function(){function e(){Object(O.a)(this,e),this.id=-1,this.title="undefine",Object(T.a)(this,"note",I,this),this.level=3,this.createTime=-1,this.doneTime=-1,this.pendingDeadline=-1,this.pendingReason="",this.deadlines=[],this.expectConsumes=[],this.expectStartTime=-1,Object(T.a)(this,"doingDurs",R,this),this.cycleId=-1}return Object(C.a)(e,[{key:"init",value:function(t){this.title=t,this.createTime=x.getTimestamp(),this.expectStartTime=this.createTime,this.id=x.generateId()+e.idCounter,e.idCounter=e.idCounter+1e3}},{key:"adaptData",value:function(){-1===this.expectStartTime&&(this.expectStartTime=this.createTime)}},{key:"isSameTask",value:function(e){return void 0!==e&&this.id===e.id}},{key:"isDoing",value:function(){return 0!==this.doingDurs.length&&-1===this.doingDurs[this.doingDurs.length-1].end}},{key:"isStarted",value:function(){return 0!==this.doingDurs.length}},{key:"lastStartTime",value:function(){return 0===this.doingDurs.length?-1:this.doingDurs[this.doingDurs.length-1].start}},{key:"start",value:function(){var e=new Y,t=x.getTimestamp();e.init(t),this.doingDurs.push(e),t<this.expectStartTime&&(this.expectStartTime=t)}},{key:"stop",value:function(){this.doingDurs[this.doingDurs.length-1].end=x.getTimestamp()}},{key:"stopDelay",value:function(e){this.doingDurs[this.doingDurs.length-1].end=x.getTimestamp()+e}},{key:"isDone",value:function(){return-1!==this.doneTime}},{key:"isPending",value:function(){return-1!==this.pendingDeadline}},{key:"isDangerousPending",value:function(){return this.isTimeDangers(this.pendingDeadline)}},{key:"isDangerousDeadline",value:function(){return this.isTimeDangers(this.getActualDeadline())}},{key:"isDangerous",value:function(){return this.isDangerousPending()||this.isDangerousDeadline()}},{key:"isTimeDangers",value:function(e){return!(e<=0)&&e-x.getTimestamp()<=72e5}},{key:"done",value:function(){this.doneTime=x.getTimestamp()}},{key:"getAllDuration",value:function(){var e=this;return 0===this.doingDurs.length?0:this.doingDurs.map((function(t,n){return t.getDur(n===e.doingDurs.length-1)})).reduce((function(e,t){return e+t}))}},{key:"getActualDeadline",value:function(){return 0===this.deadlines.length?-1:this.deadlines[this.deadlines.length-1]}},{key:"isHaveDeadline",value:function(){return this.getActualDeadline()>0}},{key:"getActualExpectConsume",value:function(){return 0===this.expectConsumes.length?-1:this.expectConsumes[this.expectConsumes.length-1]}},{key:"isExpectConsume",value:function(){return this.getActualExpectConsume()>0}},{key:"getLeftExpectConsumeTime",value:function(){return this.getActualExpectConsume()-this.getAllDuration()}}]),e}(),N.idCounter=0,L=_,I=Object(S.a)(L.prototype,"note",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new $}}),R=Object(S.a)(L.prototype,"doingDurs",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L),Y=function(){function e(){Object(O.a)(this,e),this.start=-1,this.end=-1,this.name=""}return Object(C.a)(e,[{key:"init",value:function(e){this.start=e}},{key:"init2",value:function(e,t){this.start=e,void 0!=t&&(this.end=t)}},{key:"isIn",value:function(e){return e>=this.start&&e<=this.end}},{key:"getDur",value:function(e){var t=this.end;return-1==t&&e&&(t=x.getTimestamp()),-1==t?(console.error("\u8fd9\u6bb5\u65f6\u95f4\u672a\u7ed3\u675f"),0):t-this.start}},{key:"isValid",value:function(e){return!(!e&&-1==this.end)}}],[{key:"create",value:function(t,n,a){var r=new e;return void 0!=t&&(r.start=t),void 0!=n&&(r.end=n),void 0!=a&&(r.name=a),r}}]),e}(),V=function(){function e(){Object(O.a)(this,e),this.id=-1,this._startTime=[],this._gap=[],this.title="undefine",this.level=3,this.expectConsumes=-1}return Object(C.a)(e,[{key:"init",value:function(e,t,n){this.id=x.generateId(),this.title=t,this.level=n,this._gap.push(e),this._startTime.push(x.getTimestamp())}},{key:"getGap",value:function(){return 0===this._gap.length?-1:this._gap[this._gap.length-1]}},{key:"setGap",value:function(e){this._gap.push(e)}},{key:"getStartTime",value:function(){return 0===this._startTime.length?-1:this._startTime[this._startTime.length-1]}},{key:"setStartTime",value:function(e){this._startTime.push(e)}},{key:"isTimeToCreateTask",value:function(){return(J.getCurrentDayStamp(0)-J.getSomeDayStamp(this.getStartTime(),0))%(24*this.getGap()*3600*1e3)===0}},{key:"createTask",value:function(){var e=new W;return e.init("[\u5468\u671f|".concat(G.formatTimeInDay2(x.getTimestamp()),"] ").concat(this.title)),e.level=this.level,e.expectConsumes.push(this.expectConsumes),e.cycleId=this.id,e}}]),e}(),$=(A=Object(j.Type)((function(){return q})),P=function(){function e(){Object(O.a)(this,e),this.content="",Object(T.a)(this,"timeLines",H,this)}return Object(C.a)(e,[{key:"hasTimeLine",value:function(){return 0!==this.timeLines.length}},{key:"endTimeLine",value:function(){return this.hasTimeLine()?this.timeLines[this.timeLines.length-1]:null}},{key:"getFormartTimeLines",value:function(){return this.timeLines.slice().reverse().map((function(e){return e.isDivder?"----- ".concat(G.formatTimeInDay(e.timeStamp)," -----"):"".concat(G.formatTimeInSecond(e.timeStamp)," ").concat(e.content)})).join("\n")}}]),e}(),H=Object(S.a)(P.prototype,"timeLines",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P),q=function(){function e(){Object(O.a)(this,e),this.timeStamp=-1,this.isDivder=!1,this.content=""}return Object(C.a)(e,null,[{key:"createContentNode",value:function(t){var n=new e;return n.timeStamp=x.getTimestamp(),n.content=t,n}},{key:"createDivNode",value:function(){var t=new e;return t.timeStamp=x.getTimestamp(),t.isDivder=!0,t}}]),e}(),Q=(z=Object(j.Type)((function(){return W})),F=Object(j.Type)((function(){return V})),K=function(){function e(){Object(O.a)(this,e),Object(T.a)(this,"tasks",U,this),Object(T.a)(this,"cycleRecords",B,this)}return Object(C.a)(e,[{key:"getTasks",value:function(e){return this.tasks.filter((function(t){return!t.isDone()&&t.expectStartTime<=e.end||e.isIn(t.doneTime)}))}},{key:"addTask",value:function(e){this.containsProject(e.id)||this.tasks.push(e)}},{key:"addCycleRecord",value:function(e){this.containsCycleRecord(e.id)||this.cycleRecords.push(e)}},{key:"invokeAddCycleTask",value:function(){var e=this;this.cycleRecords.forEach((function(t){t.isTimeToCreateTask()&&(0===e.tasks.filter((function(e){var n=e.cycleId===t.id,a=J.getMyCurrentDayDur2(0).isIn(e.createTime);return n&&a})).length&&e.addTask(t.createTask()))}))}},{key:"removeTask",value:function(e){if(!this.containsProject(e.id))return!1;for(var t=this.tasks.length,n=0;n<t;n++)if(this.tasks[n].id===e.id)return 0===n?this.tasks.shift():n===t-1?this.tasks.pop():this.tasks.splice(n,1),!0;return!1}},{key:"containsProject",value:function(e){return void 0!==this.tasks.find((function(t){return t.id===e}))}},{key:"containsCycleRecord",value:function(e){return void 0!==this.cycleRecords.find((function(t){return t.id===e}))}},{key:"normalUpdate",value:function(){this.invokeAddCycleTask(),this.orderTasks()}},{key:"orderTasks",value:function(){this.tasks.sort((function(e,t){return e.isDone()&&!t.isDone()?1:!e.isDone()&&t.isDone()||e.isDoing()?-1:t.isDoing()?1:e.isDangerous()&&!t.isDangerous()?-1:!e.isDangerous()&&t.isDangerous()||e.level>t.level?1:e.level<t.level||e.createTime>t.createTime?-1:e.createTime<t.createTime?1:0}))}}]),e}(),U=Object(S.a)(K.prototype,"tasks",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=Object(S.a)(K.prototype,"cycleRecords",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K),X={isDebug:!1,fetch:function(){if(this.isDebug)return this._getMockStoreModel();var e=new Q,t=localStorage.getItem("DoingList3");return null!=t?((e=Object(j.plainToClass)(Q,JSON.parse(t))).tasks.forEach((function(e){e.adaptData()})),e):e},save:function(e){localStorage.setItem("DoingList3",JSON.stringify(e))},_getMockStoreModel:function(){for(var e=new Q,t=0;t<12;t++){var n=new W;n.init("\u6211\u7684\u7b2c "+t+" \u4e2a\u4efb\u52a1"),e.addTask(n)}return e}},Z={storeModel:X.fetch(),save:function(){X.save(this.storeModel)},setModel:function(e){this.storeModel=e,this.save()}},ee=n(152),te={currentTask:void 0,setCurrentTask:function(e){this.currentTask=e}},ne={currentDoingTask:void 0,setCurrentDoingTask:function(e){this.currentDoingTask=e}},ae=new(n.n(ee).a);ae.registerStore("mainmodel",Z),ae.registerStore("CurrentTaskKey",te),ae.registerStore("CurrentDoingTaskKey",ne),ae.registerStore("CurrentDayOffsetKey",{currentDayOffset:0,setCurrentDayOffset:function(e){this.currentDayOffset=e}});var re=ae,ie=function(){function e(){Object(O.a)(this,e)}return Object(C.a)(e,null,[{key:"getDoingStatusTips",value:function(e){return e.isDoing()?"Doing\ud83d\udd34":""}},{key:"getConsumed",value:function(e){var t=G.formatDuration2(e.getAllDuration());return x.isStringEmpty(t)?"":"\u8fdb\u884c".concat(t,"(").concat(e.doingDurs.length,"\u6b21) ")}},{key:"getDeadline",value:function(t){var n=e.getPendingStatus(t);return x.isStringEmpty(n)?e.getDeadlineStatus(t):n}},{key:"getDeadlineStatus",value:function(e){var t=e.getActualDeadline();if(t<=0)return"";var n=t-x.getTimestamp();if(n<=1e3)return"Dead\u5df2\u8d85\u671f\u2757 ";var a=G.formatDuration2(n);return"Dead\u5269\u4f59".concat(a," ")}},{key:"getPendingStatus",value:function(e){var t=e.pendingDeadline;if(t<=0)return"";var n=t-x.getTimestamp();if(n<=1e3)return"Pend\u5df2\u8d85\u671f\u2757 ";var a=G.formatDuration2(n);return"Pend\u5269\u4f59".concat(a," ")}},{key:"getConsumeExpected",value:function(e){if(e.getActualExpectConsume()<=0)return"";var t=e.getLeftExpectConsumeTime();return t<=0?"\u591a\u7528".concat(G.formatDuration2(-t)," "):"\u8fd8\u8981".concat(G.formatDuration2(t)," ")}},{key:"getStartExpected",value:function(e){var t=x.getTimestamp();return t>e.expectStartTime?"":"\u8fd8\u6709".concat(G.formatDuration2(e.expectStartTime-t),"\u5f00\u59cb")}}]),e}(),oe=(n(127),n(49)),ue=n.n(oe);function ce(){var e=Object(u.a)(["\n:hover{\n\t/* background-color:#b4e7fc; */\n  background-color: ","\n};\nbackground-color: ",";\nopacity : ",";;\n"]);return ce=function(){return e},e}function se(){var e=Object(u.a)(["\nmargin: 1%;\n"]);return se=function(){return e},e}function le(){var e=Object(u.a)(["\nmargin: 1%;\n"]);return le=function(){return e},e}function fe(){var e=Object(u.a)(["\n  /* background: #d1d3a2; */\n  /* background: #d1dfff; */\n  background: #282c34;\n  overflow:auto;\n  /* height: 800px; */\n  height: 85vh;\n  margin-top:10px;\n"]);return fe=function(){return e},e}function me(){var e=Object(u.a)(["\n  width:100px;\n  display:inline-block;\n  text-align:center;\n"]);return me=function(){return e},e}function de(){var e=Object(u.a)(["\n"]);return de=function(){return e},e}function ge(){var e=Object(u.a)(["\n  /* background: #d1d3a2; */\n  /* background: #d1dfff; */\n  background: #282c34;\n"]);return ge=function(){return e},e}var he=c.a.div(ge()),pe=c.a.div(de()),ve=(c.a.span(me()),c.a.div(fe())),ye=(Object(c.a)(l.a.Group)(le()),Object(c.a)(f.a.Group)(se())),ke=c.a.div(ce(),(function(e){return e.choosed?"#f5b52b":"#b4e7fc"}),(function(e){return e.choosed?"#f5b52b":"#ffffff"}),(function(e){return e.isDone?.15:1})),De=function(){var e=re.useStore("mainmodel").storeModel,t=re.useStore("CurrentTaskKey"),n=t.currentTask,i=t.setCurrentTask,o=re.useStore("CurrentDoingTaskKey"),u=o.currentDoingTask,c=o.setCurrentDoingTask,s=re.useStore("mainmodel").save,l=re.useStore("CurrentDayOffsetKey"),d=l.currentDayOffset;l.setCurrentDayOffset;Object(a.useEffect)((function(){if(void 0===u){var t=e.tasks.filter((function(e){return e.isDoing()}));if(0===t.length)return;if(t.length>1){console.error("\u6709 ".concat(t.length," \u4e2a\u4efb\u52a1\u5728\u8fd0\u884c\u4e2d\uff0c\u81ea\u52a8\u5173\u95ed"));for(var n=1;n<t.length;n++)t[n].stop()}c(t[0])}}));function y(t){return r.a.createElement(g.a,{onClick:function(n){return function(t,n){n.level=Number(t.key),e.normalUpdate(),s(),t.domEvent.preventDefault()}(n,t)}},r.a.createElement(g.a.Item,{key:"1"},"\u4f18\u5148\u7ea7 1"),r.a.createElement(g.a.Item,{key:"2"},"\u4f18\u5148\u7ea7 2"),r.a.createElement(g.a.Item,{key:"3"},"\u4f18\u5148\u7ea7 3"),r.a.createElement(g.a.Item,{key:"4"},"\u4f18\u5148\u7ea7 4"),r.a.createElement(g.a.Item,{key:"5"},"\u4f18\u5148\u7ea7 5"))}return r.a.createElement(ve,null,r.a.createElement(D.a,{size:"small",style:{backgroundColor:"white",margin:"1%"},bordered:!0,dataSource:e.getTasks(J.getMyCurrentDayDur(d)),renderItem:function(t){return r.a.createElement(ke,{choosed:t.isSameTask(n),key:t.id,onClick:function(e){return n=t,e.preventDefault(),void i(n);var n},isDone:t.isDone()},r.a.createElement(h.a,null,r.a.createElement(p.a,{flex:"1 1 auto"},r.a.createElement(Te,{key:t.id,task:t})),r.a.createElement(p.a,{flex:"0 1 auto"},function(e){return"  "+ie.getDoingStatusTips(e)+ie.getDeadline(e)+ie.getConsumeExpected(e)}(t),r.a.createElement(v.a,{overlay:y(t)},r.a.createElement("a",{style:{paddingLeft:5},className:"ant-dropdown-link",onClick:function(e){return e.preventDefault()}},be(t.level)," ",r.a.createElement(b.a,null))),r.a.createElement(f.a,{onClick:function(n){return function(t,n){n.isDone()?m.a.error("\u4efb\u52a1\u5df2\u5b8c\u6210\uff0c\u5b8c\u6210\u65f6\u95f4:".concat(G.formatTimeInMs(n.doneTime))):void 0==u||u.id!==n.id?(n.isDoing()&&m.a.error("\u4efb\u52a1\u5f02\u5e38\u4e2d\u65ad\uff0c\u91cd\u65b0\u5f00\u59cb\u3002\u4e0a\u6b21\u5f00\u59cb\u65f6\u95f4\uff1a".concat(G.formatTimeInMs(n.lastStartTime()))),void 0!=u&&u.stop(),n.start(),c(n),e.normalUpdate(),s()):m.a.error("\u4efb\u52a1\u5df2\u7ecf\u5728\u8fdb\u884c\u4e2d\uff0c\u4e0a\u6b21\u5f00\u59cb\u65f6\u95f4\uff1a".concat(G.formatTimeInMs(n.lastStartTime())))}(0,t)}},"Start"))))}}))};function be(e){switch(e){case 1:return"\ud83c\udf1f";case 2:return"\ud83c\udf8f";case 3:return"3\ufe0f\u20e3";case 4:return"4\ufe0f";case 5:return"5\ufe0f";default:return""}}var Te=function(e){var t=Object(a.useState)(e.task.title),n=Object(s.a)(t,2),i=n[0],o=n[1],u=re.useStore("mainmodel").save;return r.a.createElement(l.a,{style:{background:"#ffffff70",fontWeight:"bold"},value:i,onChange:function(e){return o(e.target.value)},onBlur:function(t){e.task.title=i,u()}})},Oe=function(){var e=re.useStore("mainmodel"),t=e.storeModel,n=e.save,i=e.setModel,o=re.useStore("CurrentDayOffsetKey"),u=o.currentDayOffset,c=o.setCurrentDayOffset,D=Object(a.useState)(""),T=Object(s.a)(D,2),O=T[0],C=T[1],S=Object(a.useState)(!0),E=Object(s.a)(S,2),M=E[0],w=E[1],L=Object(a.useState)(2),I=Object(s.a)(L,2),R=I[0],N=I[1],_=Object(a.useState)(3),A=Object(s.a)(_,2),P=A[0],H=A[1],z=Object(a.useState)(!1),F=Object(s.a)(z,2),K=F[0],U=F[1],B=Object(a.useState)(1),Y=Object(s.a)(B,2),$=Y[0],q=Y[1],X=Object(a.useState)(!1),Z=Object(s.a)(X,2),ee=Z[0],te=Z[1],ne=Object(a.useState)(3),ae=Object(s.a)(ne,2),ie=ae[0],oe=ae[1],ce=Object(a.useState)(1),se=Object(s.a)(ce,2),le=se[0],fe=se[1],me=Object(a.useState)(!0),de=Object(s.a)(me,2),ge=de[0],ve=de[1],ke=Object(a.useState)(null),Te=Object(s.a)(ke,2),Oe=Te[0],Ce=Te[1];function Se(e){e||!ee?w(e):m.a.error("\u957f\u4efb\u52a1\u5fc5\u987b\u4f30\u65f6")}function xe(e){e&&je(!1),U(e)}function je(e){e&&(Se(!0),xe(!1)),te(e)}function Ee(e){c(e?u+1:u-1)}function Me(){x.downloadFile("DoingList_".concat(G.formatTimeInMsToFileName(x.getTimestamp()),".dl"),JSON.stringify(t))}return r.a.createElement(he,null,r.a.createElement(ye,null,r.a.createElement(f.a,{type:"primary",size:"small",onClick:function(e){return Ee(!1)}},"\u2190"),r.a.createElement("span",{style:{backgroundColor:"#ffffff",padding:4}},G.formatTimeInDay(J.getMyCurrentDayStamp(u,J.dayOffset)),"(",function(){var e=""+u;return u>0&&(e="+"+e),e}(),")"),r.a.createElement(f.a,{type:"primary",size:"small",onClick:function(e){return Ee(!0)}},"\u2192"),r.a.createElement("span",{style:{paddingLeft:10}}),r.a.createElement(f.a,{type:"primary",size:"small",onClick:function(e){return Me()}},"\u5bfc\u51fa"),r.a.createElement("input",{type:"file",id:"upload-file",multiple:!0,onChange:function(e){return function(e){var t=e.target.files[0];console.log(t);var n=new FileReader;n.onload=function(){var e=this.result;"string"===typeof e?d.a.confirm({title:"\u786e\u5b9a\u8981\u5bfc\u5165\u561b\uff1f",content:"\u5bfc\u5165\u4f1a\u8986\u76d6\u5f53\u524d\u6240\u6709\u4efb\u52a1",onOk:function(){d.a.confirm({title:"\u662f\u5426\u9700\u8981\u5148\u4e0b\u8f7d\u5f53\u524d\u4efb\u52a1\uff1f",content:"",onOk:function(){Me(),i(Object(j.plainToClass)(Q,JSON.parse(e)))},onCancel:function(){i(Object(j.plainToClass)(Q,JSON.parse(e)))}})}}):m.a.error("\u5bfc\u5165\u6587\u4ef6\u6709\u95ee\u9898\uff0c\u5bfc\u5165\u5931\u8d25")},n.readAsText(t)}(e)}})),r.a.createElement(h.a,{style:{margin:"10px"}},r.a.createElement(p.a,{flex:"1 1 auto"},r.a.createElement(l.a,{placeholder:"\u8f93\u5165\u4efb\u52a1\uff0c\u56de\u8f66\u6dfb\u52a0",value:O,onChange:function(e){return C(e.target.value)},onPressEnter:function(e){if(e.preventDefault(),x.isStringEmpty(O))m.a.error("\u8bf7\u8f93\u5165\u5185\u5bb9");else if(ee&&K)m.a.error("\u4e0d\u80fd\u540c\u65f6\u662f\u957f\u4efb\u52a1\u548c\u5468\u671f\u4efb\u52a1");else{if(K){var a=new V;a.init($,O,P),ge||null===Oe||a.setStartTime(Oe),a.expectConsumes=M?3600*R*1e3:-1,t.addCycleRecord(a),t.normalUpdate()}else{var r=new W;r.init(O),r.level=P,ge||null===Oe||(r.expectStartTime=Oe),M?r.expectConsumes.push(3600*R*1e3):r.expectConsumes.push(-1),t.addTask(r),t.normalUpdate()}n(),C(""),Ce(null)}}})),r.a.createElement(p.a,{flex:"0 1 auto"},r.a.createElement(v.a,{overlay:r.a.createElement(g.a,{onClick:function(e){return H(Number(e.key))}},r.a.createElement(g.a.Item,{key:"1"},"\u4f18\u5148\u7ea7 1"),r.a.createElement(g.a.Item,{key:"2"},"\u4f18\u5148\u7ea7 2"),r.a.createElement(g.a.Item,{key:"3"},"\u4f18\u5148\u7ea7 3"),r.a.createElement(g.a.Item,{key:"4"},"\u4f18\u5148\u7ea7 4"),r.a.createElement(g.a.Item,{key:"5"},"\u4f18\u5148\u7ea7 5"))},r.a.createElement("a",{style:{paddingLeft:5},className:"ant-dropdown-link",onClick:function(e){return e.preventDefault()}},be(P)," ",r.a.createElement(b.a,null))),r.a.createElement(y.a,{style:{marginLeft:"5px",marginRight:"3px"},checkedChildren:"\u4f30\u65f6",unCheckedChildren:"\u4e0d\u9650",checked:M,onChange:function(e){return Se(e)}}),r.a.createElement(y.a,{style:{marginLeft:"5px",marginRight:"3px"},checkedChildren:"\u7acb\u523b\u5f00\u59cb",unCheckedChildren:"\u4e4b\u540e\u5f00\u59cb",checked:ge,onChange:function(e){return ve(e)}}),r.a.createElement(y.a,{style:{marginLeft:"5px",marginRight:"3px"},checkedChildren:"\u957f\u4efb\u52a1",unCheckedChildren:"\u77ed\u4efb\u52a1",checked:ee,onChange:function(e){return je(e)}}),r.a.createElement(y.a,{style:{marginLeft:"5px",marginRight:"3px"},checkedChildren:"\u5468\u671f",unCheckedChildren:"\u5355\u4e2a",checked:K,onChange:function(e){return xe(e)}}))),r.a.createElement(pe,{style:{margin:"10px",color:"#ffffff"}},M&&r.a.createElement(l.a,{style:{width:"100px",marginLeft:"15px"},value:R,placeholder:"\u82b1\u8d39\u65f6\u95f4",prefix:"\u9884\u8ba1",suffix:"h",onChange:function(e){return N(Number(e.target.value))}}),!ge&&r.a.createElement("span",{style:{marginLeft:"15px"}},"\u5f00\u59cb\u65f6\u95f4\uff1a",r.a.createElement(k.a,{showTime:!0,value:Oe,onOk:function(e){return Ce(ue()(e.valueOf()))}})),ee&&r.a.createElement("span",{style:{marginLeft:"15px"}},"\u957f\u4efb\u52a1\uff1a",r.a.createElement(l.a,{style:{width:"100px"},value:ie,prefix:"\u8ba1\u5212",suffix:"\u5929",onChange:function(e){return oe(Number(e.target.value))}}),r.a.createElement(l.a,{style:{width:"100px"},value:le,prefix:"\u5047\u671f",suffix:"\u5929",onChange:function(e){return fe(Number(e.target.value))}})),K&&r.a.createElement(l.a,{style:{width:"100px",marginLeft:"15px"},value:$,placeholder:"1\u8868\u793a\u4e0d\u95f4\u9694",prefix:"\u6bcf",suffix:"\u5929",onChange:function(e){return q(Number(e.target.value))}})),r.a.createElement("span",{style:{backgroundColor:"#ffffff",padding:2,margin:"10px"}},function(){var e=t.getTasks(J.getMyCurrentDayDur(u)).filter((function(e){return!e.isDone()}));if(0===e.length)return"";var n="",a=e.map((function(e){var t=e.getLeftExpectConsumeTime();return t<0?0:t})).reduce((function(e,t){return e+t}));return a>0&&(n="\uff0c\u603b\u5269\u4f59\u9884\u4f30\u9700\u8981\u82b1\u8d39".concat(G.formatDuration(a))),"\u5171".concat(e.length,"\u4e2a\u4efb\u52a1\u672a\u5b8c\u6210").concat(n)}()),r.a.createElement(De,null))};function Ce(){var e=Object(u.a)(["\nmargin: 2px;\n"]);return Ce=function(){return e},e}function Se(){var e=Object(u.a)(["\n  flex-grow: 1;\n"]);return Se=function(){return e},e}function xe(){var e=Object(u.a)(["\n"]);return xe=function(){return e},e}function je(){var e=Object(u.a)(["\n  background: #ffffff;\n  display: flex;\n  height: 100%;\n  flex-direction: column;\n"]);return je=function(){return e},e}var Ee=c.a.div(je()),Me=c.a.div(xe()),we=Object(c.a)(l.a.TextArea)(Se()),Le=Object(c.a)(f.a.Group)(Ce()),Ie=function(){var e=re.useStore("mainmodel").storeModel,t=re.useStore("CurrentTaskKey").currentTask,n=re.useStore("mainmodel").save,i=Object(a.useState)(""),o=Object(s.a)(i,2),u=o[0],c=o[1],g=Object(a.useState)(""),h=Object(s.a)(g,2),p=h[0],v=h[1],D=Object(a.useState)(!1),b=Object(s.a)(D,2),T=b[0],O=b[1],C=Object(a.useState)(-1),S=Object(s.a)(C,2),j=S[0],E=S[1],M=Object(a.useState)(!1),w=Object(s.a)(M,2),L=w[0],I=w[1],R=Object(a.useState)(null),N=Object(s.a)(R,2),_=N[0],A=N[1],P=Object(a.useState)(!1),H=Object(s.a)(P,2),z=H[0],F=H[1],K=Object(a.useState)(""),U=Object(s.a)(K,2),B=U[0],W=U[1],V=Object(a.useState)(null),$=Object(s.a)(V,2),Q=$[0],X=$[1],Z=Object(a.useState)(null),ee=Object(s.a)(Z,2),te=ee[0],ne=ee[1],ae=re.useStore("CurrentDoingTaskKey"),oe=(ae.currentDoingTask,ae.setCurrentDoingTask),ce=Object(a.useState)(void 0),se=Object(s.a)(ce,2),le=se[0],fe=se[1];function me(e){e.preventDefault(),function(e,a){e&&e.preventDefault();if(void 0===t)return;t.note.content=u,n(),a&&m.a.info("\u5df2\u4fdd\u5b58")}(e,!1)}function de(t){t.done(),e.normalUpdate(),m.a.success("\u4efb\u52a1\u5df2\u5b8c\u6210"),n()}function ge(e){var t=e.getActualDeadline();return t>0?ue()(t):null}function he(e,t){for(var n=!0,a=0;a<(arguments.length<=2?0:arguments.length-2);a++){var r=a+2<2||arguments.length<=a+2?void 0:arguments[a+2];if(r.start>0&&e<r.start?(m.a.error("".concat(t,"(").concat(G.formatTimeInMinute(e),")\u65e9\u4e8e").concat(r.start,"(").concat(G.formatTimeInMinute(r.start),")\uff0c\u8bf7\u91cd\u65b0\u8bbe\u7f6e")),n=!1):r.end>0&&e>r.end&&(m.a.error("".concat(t,"(").concat(G.formatTimeInMinute(e),")\u665a\u4e8e").concat(r.end,"(").concat(G.formatTimeInMinute(r.end),")\uff0c\u8bf7\u91cd\u65b0\u8bbe\u7f6e")),n=!1),!n)return!1}return!0}function pe(e){var t=e.pendingDeadline;return t>0?ue()(t):null}function ve(e){void 0!==t&&(e||(t.expectConsumes.push(-1),E(-1),n()),O(e))}function ye(e){void 0!==t&&(e||(t.deadlines.push(-1),A(null),n()),I(e))}return Object(a.useEffect)((function(){if(void 0!==t&&!t.isSameTask(le)){fe(t),c(t.note.content);var n=t.getActualExpectConsume();n<0?(E(n),ve(!1)):(ve(!0),E(n/36e5)),F(t.isPending()),W(t.pendingReason),X(pe(t)),A(ge(t)),ye(t.isHaveDeadline()),void 0===t||t.isStarted()?ne(null):ne(ue()(t.expectStartTime)),e.normalUpdate()}})),void 0===t?null:r.a.createElement(Ee,{style:{margin:"5px"}},void 0!==t&&r.a.createElement(Me,{style:{margin:"5px"}},r.a.createElement(Le,null,r.a.createElement(f.a,{onClick:function(a){void 0!==t&&d.a.confirm({title:"\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",content:"\u662f\u5426\u5220\u9664\u4efb\u52a1\uff1a".concat(t.title),onOk:function(){e.removeTask(t)?(m.a.success("\u5220\u9664\u4efb\u52a1\u6210\u529f"),n()):m.a.error("\u5220\u9664\u4efb\u52a1\u5931\u8d25")}})}},"D"),r.a.createElement(f.a,{onClick:function(e){return function(e){if(void 0!==t){var n=t;n.isDone()?m.a.error("\u4efb\u52a1\u5df2\u5b8c\u6210\uff0c\u5b8c\u6210\u65f6\u95f4:".concat(G.formatTimeInMs(n.doneTime))):n.isDoing()?(n.stop(),oe(void 0),de(n)):d.a.confirm({title:"\u5f53\u524d\u4efb\u52a1\u4e0d\u5728\u8fdb\u884c\u4e2d\uff0c\u786e\u5b9a\u8981\u5b8c\u6210\u5417\uff1f",content:"\u662f\u5426\u5b8c\u6210\u4efb\u52a1\uff1a".concat(n.title),onOk:function(){de(n)}})}}()}},"Done")),r.a.createElement(y.a,{style:{marginLeft:"5px",marginRight:"3px"},checkedChildren:"\u4f30\u65f6",unCheckedChildren:"\u4e0d\u9650",checked:T,onChange:function(e){return ve(e)}}),r.a.createElement(y.a,{style:{marginLeft:"5px",marginRight:"3px"},checkedChildren:"\u622a\u6b62\u65f6\u95f4",unCheckedChildren:"\u6ca1\u6709\u622a\u6b62",checked:L,onChange:function(e){return ye(e)}}),r.a.createElement(y.a,{style:{marginLeft:"9px",marginRight:"5px"},checkedChildren:"Pending",unCheckedChildren:"NoPend",checked:z,onChange:function(e){return a=e,void(void 0!==t&&(a||(t.pendingDeadline=-1,X(null),n()),F(a)));var a}})),r.a.createElement("div",{style:{marginLeft:"15px",marginRight:"15px",fontWeight:"bold"}},function(){if(void 0===t)return"";var e=t;return ie.getDoingStatusTips(e)+ie.getConsumed(e)+ie.getDeadline(e)+ie.getConsumeExpected(e)+ie.getStartExpected(e)}()),r.a.createElement(Me,{style:{marginTop:"5px",marginBottom:"5px"}},null!==te&&r.a.createElement("span",{style:{marginLeft:"15px"}},"\u9884\u671f\u5f00\u59cb\u65f6\u95f4\uff1a",r.a.createElement(k.a,{showTime:!0,value:te,onOk:function(e){return function(e,t){var a=e.valueOf();he(a,"\u9884\u671f\u5f00\u59cb\u65f6\u95f4",Y.create(void 0,t.pendingDeadline,"PendLine"),Y.create(void 0,t.getActualDeadline(),"Deadline"))&&(ne(a),t.expectStartTime=a,n())}(e,t)}})),T&&r.a.createElement("span",{style:{marginLeft:"15px"}},"\u4f30\u65f6\uff1a",r.a.createElement(l.a,{style:{width:"100px"},value:j,placeholder:"\u82b1\u8d39\u65f6\u95f4 \u56de\u8f66\u4fdd\u5b58",prefix:"\u9884\u8ba1",suffix:"h",onChange:function(e){return E(Number(e.target.value))},onBlur:function(){if(void 0!==t){var e=t;-1==j?e.expectConsumes.push(-1):e.expectConsumes.push(3600*j*1e3),n()}}})),L&&r.a.createElement("span",{style:{marginLeft:"15px"}},"DeadLine\uff1a",r.a.createElement(k.a,{showTime:!0,value:_,onOk:function(e){return function(e){void 0!==t&&(t.deadlines.push(e.valueOf()),A(ge(t)),n())}(e)}})),z&&r.a.createElement("span",{style:{marginLeft:"15px"}},"Pending\uff1a",r.a.createElement(k.a,{showTime:!0,value:Q,onOk:function(e){return function(e){if(void 0!==t){var a=t;if(z){var r=e.valueOf();he(r,"Pending\u65f6\u95f4",Y.create(void 0,a.getActualDeadline(),"Deadline"))&&(a.pendingDeadline=r,X(pe(a)),n())}else m.a.error("\u8bbe\u7f6e\u65e0\u6548\uff0c\u8bf7\u6253\u5f00 pending \u5f00\u5173\u540e\u91cd\u65b0\u8bbe\u7f6e")}}(e)}}),r.a.createElement(l.a,{style:{width:"200px"},value:B,prefix:"\u539f\u56e0:",placeholder:"\uff08\u81ea\u52a8\u4fdd\u5b58\uff09",onChange:function(e){return W(e.target.value)},onBlur:function(){void 0!==t&&(t.pendingReason=B,n())}}))),void 0!==t&&r.a.createElement(Me,{style:{marginLeft:"15px"}},r.a.createElement(l.a,{placeholder:"\u8f93\u5165\u65f6\u95f4\u7ebf\uff0c\u56de\u8f66\u6dfb\u52a0",value:p,onChange:function(e){return v(e.target.value)},onPressEnter:function(e){if(e.preventDefault(),void 0!==t)if(x.isStringEmpty(p))m.a.error("\u8bf7\u8f93\u5165\u5185\u5bb9");else{var a=t.note.endTimeLine();null!=a&&J.isSameDay(a.timeStamp,x.getTimestamp())||t.note.timeLines.push(q.createDivNode()),t.note.timeLines.push(q.createContentNode(p)),n(),v("")}}}),r.a.createElement(Me,{style:{height:"250px",overflow:"scroll",whiteSpace:"pre-wrap"}},t.note.getFormartTimeLines())),r.a.createElement(we,{placeholder:"\u4efb\u52a1\u65e5\u5fd7\uff08\u81ea\u52a8\u4fdd\u5b58\uff09",value:u,onChange:function(e){return c(e.target.value)},onBlur:function(e){return me(e)}}))};function Re(){var e=Object(u.a)(["\n\n"]);return Re=function(){return e},e}var Ne=c.a.div(Re()),_e=function(){var e=re.useStore("mainmodel").storeModel;return r.a.createElement(Ne,{style:{overflow:"scroll",whiteSpace:"pre-wrap",margin:"5px"}},e.getTasks(J.getMyCurrentDayDur(0)).flatMap((function(e){return e.note.timeLines})).sort((function(e,t){return e.timeStamp>t.timeStamp?-1:e.timeStamp<t.timeStamp?1:0})).map((function(e){return e.isDivder?"":"".concat(G.formatTimeInSecond(e.timeStamp)," ").concat(e.content," \n")})).join(""))};function Ae(){var e=Object(u.a)(["\n  display: grid;\n  min-height: 100vh;\n  height: 100%;\n  width: 100%;\n  grid-template-columns: 40% 40% 20%;\n  grid-template-rows: 100%;\n"]);return Ae=function(){return e},e}var Pe=c.a.div(Ae()),He=function(){return r.a.createElement(Pe,null,r.a.createElement(Oe,null),r.a.createElement(Ie,null),r.a.createElement(_e,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(He,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[185,1,2]]]);
//# sourceMappingURL=main.6f2d9043.chunk.js.map